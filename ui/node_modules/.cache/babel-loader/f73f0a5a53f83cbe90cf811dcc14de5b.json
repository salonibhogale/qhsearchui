{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../../core\");\n\nvar ui_1 = require(\"../../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar map = require('lodash/map');\n\nvar identity = require('lodash/identity');\n\nvar HierarchicalMenuFilter =\n/** @class */\nfunction (_super) {\n  __extends(HierarchicalMenuFilter, _super);\n\n  function HierarchicalMenuFilter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HierarchicalMenuFilter.prototype.defineBEMBlocks = function () {\n    var blockClass = this.props.mod || 'sk-hierarchical-menu';\n    return {\n      container: blockClass + \"-list\",\n      option: blockClass + \"-option\"\n    };\n  };\n\n  HierarchicalMenuFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        fields = _a.fields,\n        size = _a.size,\n        orderKey = _a.orderKey,\n        orderDirection = _a.orderDirection;\n    return new core_1.HierarchicalFacetAccessor(id, {\n      id: id,\n      title: title,\n      fields: fields,\n      size: size,\n      orderKey: orderKey,\n      orderDirection: orderDirection\n    });\n  };\n\n  HierarchicalMenuFilter.prototype.addFilter = function (option, level) {\n    this.accessor.state = this.accessor.state.toggleLevel(level, option.key);\n    this.searchkit.performSearch();\n  };\n\n  HierarchicalMenuFilter.prototype.renderOption = function (level, option) {\n    var _this = this;\n\n    var _a = this.props,\n        countFormatter = _a.countFormatter,\n        itemComponent = _a.itemComponent;\n    var active = this.accessor.state.contains(level, option.key);\n    return React.createElement(\"div\", {\n      key: option.key\n    }, core_1.renderComponent(itemComponent, {\n      active: active,\n      itemKey: option.key,\n      showCount: true,\n      bemBlocks: this.bemBlocks,\n      onClick: this.addFilter.bind(this, option, level),\n      label: this.translate(option.key),\n      count: countFormatter(option.doc_count)\n    }), function () {\n      if (_this.accessor.resultsState.contains(level, option.key)) {\n        return _this.renderOptions(level + 1);\n      }\n    }());\n  };\n\n  HierarchicalMenuFilter.prototype.renderOptions = function (level) {\n    var block = this.bemBlocks.container;\n    return React.createElement(\"div\", {\n      className: block('hierarchical-options')\n    }, map(this.accessor.getBuckets(level), this.renderOption.bind(this, level)));\n  };\n\n  HierarchicalMenuFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var block = this.bemBlocks.container;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.getBuckets(0).length == 0\n    }, React.createElement(\"div\", {\n      className: block('root')\n    }, this.renderOptions(0)));\n  };\n\n  HierarchicalMenuFilter.defaultProps = {\n    countFormatter: identity,\n    size: 20,\n    containerComponent: ui_1.Panel,\n    itemComponent: ui_1.ItemComponent\n  };\n  HierarchicalMenuFilter.propTypes = defaults({\n    id: PropTypes.string.isRequired,\n    fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n    title: PropTypes.string.isRequired,\n    orderKey: PropTypes.string,\n    orderDirection: PropTypes.oneOf(['asc', 'desc']),\n    countFormatter: PropTypes.func,\n    containerComponent: core_1.RenderComponentPropType,\n    itemComponent: core_1.RenderComponentPropType\n  }, core_1.SearchkitComponent.propTypes);\n  return HierarchicalMenuFilter;\n}(core_1.SearchkitComponent);\n\nexports.HierarchicalMenuFilter = HierarchicalMenuFilter;","map":{"version":3,"sources":["../../../../../../src/components/search/filters/hierarchical-menu-filter/src/HierarchicalMenuFilter.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar core_1 = require(\"../../../../../core\");\nvar ui_1 = require(\"../../../../ui\");\nvar defaults = require('lodash/defaults');\nvar map = require('lodash/map');\nvar identity = require('lodash/identity');\nvar HierarchicalMenuFilter = /** @class */ (function (_super) {\n    __extends(HierarchicalMenuFilter, _super);\n    function HierarchicalMenuFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HierarchicalMenuFilter.prototype.defineBEMBlocks = function () {\n        var blockClass = this.props.mod || 'sk-hierarchical-menu';\n        return {\n            container: blockClass + \"-list\",\n            option: blockClass + \"-option\"\n        };\n    };\n    HierarchicalMenuFilter.prototype.defineAccessor = function () {\n        var _a = this.props, id = _a.id, title = _a.title, fields = _a.fields, size = _a.size, orderKey = _a.orderKey, orderDirection = _a.orderDirection;\n        return new core_1.HierarchicalFacetAccessor(id, {\n            id: id,\n            title: title,\n            fields: fields,\n            size: size,\n            orderKey: orderKey,\n            orderDirection: orderDirection\n        });\n    };\n    HierarchicalMenuFilter.prototype.addFilter = function (option, level) {\n        this.accessor.state = this.accessor.state.toggleLevel(level, option.key);\n        this.searchkit.performSearch();\n    };\n    HierarchicalMenuFilter.prototype.renderOption = function (level, option) {\n        var _this = this;\n        var _a = this.props, countFormatter = _a.countFormatter, itemComponent = _a.itemComponent;\n        var active = this.accessor.state.contains(level, option.key);\n        return (React.createElement(\"div\", { key: option.key },\n            core_1.renderComponent(itemComponent, {\n                active: active,\n                itemKey: option.key,\n                showCount: true,\n                bemBlocks: this.bemBlocks,\n                onClick: this.addFilter.bind(this, option, level),\n                label: this.translate(option.key),\n                count: countFormatter(option.doc_count)\n            }),\n            (function () {\n                if (_this.accessor.resultsState.contains(level, option.key)) {\n                    return _this.renderOptions(level + 1);\n                }\n            })()));\n    };\n    HierarchicalMenuFilter.prototype.renderOptions = function (level) {\n        var block = this.bemBlocks.container;\n        return (React.createElement(\"div\", { className: block('hierarchical-options') }, map(this.accessor.getBuckets(level), this.renderOption.bind(this, level))));\n    };\n    HierarchicalMenuFilter.prototype.render = function () {\n        if (!this.accessor)\n            return null;\n        var block = this.bemBlocks.container;\n        var _a = this.props, id = _a.id, title = _a.title, containerComponent = _a.containerComponent;\n        return core_1.renderComponent(containerComponent, {\n            title: title,\n            className: id ? \"filter--\" + id : undefined,\n            disabled: this.accessor.getBuckets(0).length == 0\n        }, React.createElement(\"div\", { className: block('root') }, this.renderOptions(0)));\n    };\n    HierarchicalMenuFilter.defaultProps = {\n        countFormatter: identity,\n        size: 20,\n        containerComponent: ui_1.Panel,\n        itemComponent: ui_1.ItemComponent\n    };\n    HierarchicalMenuFilter.propTypes = defaults({\n        id: PropTypes.string.isRequired,\n        fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n        title: PropTypes.string.isRequired,\n        orderKey: PropTypes.string,\n        orderDirection: PropTypes.oneOf(['asc', 'desc']),\n        countFormatter: PropTypes.func,\n        containerComponent: core_1.RenderComponentPropType,\n        itemComponent: core_1.RenderComponentPropType\n    }, core_1.SearchkitComponent.propTypes);\n    return HierarchicalMenuFilter;\n}(core_1.SearchkitComponent));\nexports.HierarchicalMenuFilter = HierarchicalMenuFilter;\n//# sourceMappingURL=HierarchicalMenuFilter.js.map"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar core_1 = require(\"../../../../core\");\n\nvar react_1 = require(\"../../../../core/react\");\n\nvar ui_1 = require(\"../../../ui\");\n\nvar FacetFilterProps_1 = require(\"./FacetFilterProps\");\n\nvar identity = require('lodash/identity');\n\nvar FacetFilter =\n/** @class */\nfunction (_super) {\n  __extends(FacetFilter, _super);\n\n  function FacetFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.toggleViewMoreOption = _this.toggleViewMoreOption.bind(_this);\n    return _this;\n  }\n\n  FacetFilter.prototype.getAccessorOptions = function () {\n    var _a = this.props,\n        field = _a.field,\n        id = _a.id,\n        operator = _a.operator,\n        title = _a.title,\n        include = _a.include,\n        exclude = _a.exclude,\n        size = _a.size,\n        translations = _a.translations,\n        orderKey = _a.orderKey,\n        orderDirection = _a.orderDirection,\n        fieldOptions = _a.fieldOptions;\n    return {\n      id: id,\n      operator: operator,\n      title: title,\n      size: size,\n      include: include,\n      exclude: exclude,\n      field: field,\n      translations: translations,\n      orderKey: orderKey,\n      orderDirection: orderDirection,\n      fieldOptions: fieldOptions\n    };\n  };\n\n  FacetFilter.prototype.defineAccessor = function () {\n    return new core_1.FacetAccessor(this.props.id, this.getAccessorOptions());\n  };\n\n  FacetFilter.prototype.defineBEMBlocks = function () {\n    var blockName = this.props.mod || 'sk-refinement-list';\n    return {\n      container: blockName,\n      option: blockName + \"-option\"\n    };\n  };\n\n  FacetFilter.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.operator != this.props.operator) {\n      this.accessor.options.operator = this.props.operator;\n      this.searchkit.performSearch();\n    }\n  };\n\n  FacetFilter.prototype.toggleFilter = function (key) {\n    this.accessor.state = this.accessor.state.toggle(key);\n    this.searchkit.performSearch();\n  };\n\n  FacetFilter.prototype.setFilters = function (keys) {\n    this.accessor.state = this.accessor.state.setValue(keys);\n    this.searchkit.performSearch();\n  };\n\n  FacetFilter.prototype.toggleViewMoreOption = function (option) {\n    this.accessor.setViewMoreOption(option);\n    this.searchkit.performSearch();\n  };\n\n  FacetFilter.prototype.hasOptions = function () {\n    return this.accessor.getBuckets().length != 0;\n  };\n\n  FacetFilter.prototype.getSelectedItems = function () {\n    return this.accessor.state.getValue();\n  };\n\n  FacetFilter.prototype.getItems = function () {\n    return this.props.bucketsTransform(this.accessor.getBuckets());\n  };\n\n  FacetFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        listComponent = _a.listComponent,\n        containerComponent = _a.containerComponent,\n        showCount = _a.showCount,\n        title = _a.title,\n        id = _a.id,\n        countFormatter = _a.countFormatter;\n    return react_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: !this.hasOptions()\n    }, [react_1.renderComponent(listComponent, {\n      key: 'listComponent',\n      items: this.getItems(),\n      itemComponent: this.props.itemComponent,\n      selectedItems: this.getSelectedItems(),\n      toggleItem: this.toggleFilter.bind(this),\n      setItems: this.setFilters.bind(this),\n      docCount: this.accessor.getDocCount(),\n      showCount: showCount,\n      translate: this.translate,\n      countFormatter: countFormatter\n    }), this.renderShowMore()]);\n  };\n\n  FacetFilter.prototype.renderShowMore = function () {\n    var _this = this;\n\n    var option = this.accessor.getMoreSizeOption();\n\n    if (!option || !this.props.showMore) {\n      return null;\n    }\n\n    return React.createElement(react_1.FastClick, {\n      handler: function () {\n        return _this.toggleViewMoreOption(option);\n      },\n      key: \"showMore\"\n    }, React.createElement(\"div\", {\n      \"data-qa\": \"show-more\",\n      className: this.bemBlocks.container('view-more-action')\n    }, this.translate(option.label)));\n  };\n\n  FacetFilter.propTypes = FacetFilterProps_1.FacetFilterPropTypes;\n  FacetFilter.defaultProps = {\n    listComponent: ui_1.CheckboxItemList,\n    containerComponent: ui_1.Panel,\n    size: 50,\n    collapsable: false,\n    showCount: true,\n    showMore: true,\n    bucketsTransform: identity\n  };\n  return FacetFilter;\n}(react_1.SearchkitComponent);\n\nexports.FacetFilter = FacetFilter;","map":{"version":3,"sources":["../../../../../src/components/search/filters/facet-filter/FacetFilter.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar core_1 = require(\"../../../../core\");\nvar react_1 = require(\"../../../../core/react\");\nvar ui_1 = require(\"../../../ui\");\nvar FacetFilterProps_1 = require(\"./FacetFilterProps\");\nvar identity = require('lodash/identity');\nvar FacetFilter = /** @class */ (function (_super) {\n    __extends(FacetFilter, _super);\n    function FacetFilter(props) {\n        var _this = _super.call(this, props) || this;\n        _this.toggleViewMoreOption = _this.toggleViewMoreOption.bind(_this);\n        return _this;\n    }\n    FacetFilter.prototype.getAccessorOptions = function () {\n        var _a = this.props, field = _a.field, id = _a.id, operator = _a.operator, title = _a.title, include = _a.include, exclude = _a.exclude, size = _a.size, translations = _a.translations, orderKey = _a.orderKey, orderDirection = _a.orderDirection, fieldOptions = _a.fieldOptions;\n        return {\n            id: id,\n            operator: operator,\n            title: title,\n            size: size,\n            include: include,\n            exclude: exclude,\n            field: field,\n            translations: translations,\n            orderKey: orderKey,\n            orderDirection: orderDirection,\n            fieldOptions: fieldOptions\n        };\n    };\n    FacetFilter.prototype.defineAccessor = function () {\n        return new core_1.FacetAccessor(this.props.id, this.getAccessorOptions());\n    };\n    FacetFilter.prototype.defineBEMBlocks = function () {\n        var blockName = this.props.mod || 'sk-refinement-list';\n        return {\n            container: blockName,\n            option: blockName + \"-option\"\n        };\n    };\n    FacetFilter.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.operator != this.props.operator) {\n            this.accessor.options.operator = this.props.operator;\n            this.searchkit.performSearch();\n        }\n    };\n    FacetFilter.prototype.toggleFilter = function (key) {\n        this.accessor.state = this.accessor.state.toggle(key);\n        this.searchkit.performSearch();\n    };\n    FacetFilter.prototype.setFilters = function (keys) {\n        this.accessor.state = this.accessor.state.setValue(keys);\n        this.searchkit.performSearch();\n    };\n    FacetFilter.prototype.toggleViewMoreOption = function (option) {\n        this.accessor.setViewMoreOption(option);\n        this.searchkit.performSearch();\n    };\n    FacetFilter.prototype.hasOptions = function () {\n        return this.accessor.getBuckets().length != 0;\n    };\n    FacetFilter.prototype.getSelectedItems = function () {\n        return this.accessor.state.getValue();\n    };\n    FacetFilter.prototype.getItems = function () {\n        return this.props.bucketsTransform(this.accessor.getBuckets());\n    };\n    FacetFilter.prototype.render = function () {\n        if (!this.accessor)\n            return null;\n        var _a = this.props, listComponent = _a.listComponent, containerComponent = _a.containerComponent, showCount = _a.showCount, title = _a.title, id = _a.id, countFormatter = _a.countFormatter;\n        return react_1.renderComponent(containerComponent, {\n            title: title,\n            className: id ? \"filter--\" + id : undefined,\n            disabled: !this.hasOptions()\n        }, [\n            react_1.renderComponent(listComponent, {\n                key: 'listComponent',\n                items: this.getItems(),\n                itemComponent: this.props.itemComponent,\n                selectedItems: this.getSelectedItems(),\n                toggleItem: this.toggleFilter.bind(this),\n                setItems: this.setFilters.bind(this),\n                docCount: this.accessor.getDocCount(),\n                showCount: showCount,\n                translate: this.translate,\n                countFormatter: countFormatter\n            }),\n            this.renderShowMore()\n        ]);\n    };\n    FacetFilter.prototype.renderShowMore = function () {\n        var _this = this;\n        var option = this.accessor.getMoreSizeOption();\n        if (!option || !this.props.showMore) {\n            return null;\n        }\n        return (React.createElement(react_1.FastClick, { handler: function () { return _this.toggleViewMoreOption(option); }, key: \"showMore\" },\n            React.createElement(\"div\", { \"data-qa\": \"show-more\", className: this.bemBlocks.container('view-more-action') }, this.translate(option.label))));\n    };\n    FacetFilter.propTypes = FacetFilterProps_1.FacetFilterPropTypes;\n    FacetFilter.defaultProps = {\n        listComponent: ui_1.CheckboxItemList,\n        containerComponent: ui_1.Panel,\n        size: 50,\n        collapsable: false,\n        showCount: true,\n        showMore: true,\n        bucketsTransform: identity\n    };\n    return FacetFilter;\n}(react_1.SearchkitComponent));\nexports.FacetFilter = FacetFilter;\n//# sourceMappingURL=FacetFilter.js.map"]},"metadata":{},"sourceType":"script"}
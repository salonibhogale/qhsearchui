{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../../core\");\n\nvar ui_1 = require(\"../../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar get = require('lodash/get');\n\nvar RangeFilter =\n/** @class */\nfunction (_super) {\n  __extends(RangeFilter, _super);\n\n  function RangeFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n    _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n    return _this;\n  }\n\n  RangeFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        min = _a.min,\n        max = _a.max,\n        field = _a.field,\n        fieldOptions = _a.fieldOptions,\n        interval = _a.interval,\n        showHistogram = _a.showHistogram,\n        rangeFormatter = _a.rangeFormatter,\n        translations = _a.translations;\n    return new core_1.RangeAccessor(id, {\n      id: id,\n      min: min,\n      max: max,\n      title: title,\n      field: field,\n      rangeFormatter: rangeFormatter,\n      translations: translations,\n      interval: interval,\n      loadHistogram: showHistogram,\n      fieldOptions: fieldOptions\n    });\n  };\n\n  RangeFilter.prototype.defineBEMBlocks = function () {\n    var block = this.props.mod || 'sk-range-filter';\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    };\n  };\n\n  RangeFilter.prototype.sliderUpdate = function (newValues) {\n    if (newValues.min == this.props.min && newValues.max == this.props.max) {\n      this.accessor.state = this.accessor.state.clear();\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues);\n    }\n\n    this.forceUpdate();\n  };\n\n  RangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n    this.sliderUpdate(newValues);\n    this.searchkit.performSearch();\n  };\n\n  RangeFilter.prototype.getRangeComponent = function () {\n    var _a = this.props,\n        rangeComponent = _a.rangeComponent,\n        showHistogram = _a.showHistogram;\n\n    if (!showHistogram && rangeComponent === ui_1.RangeSliderHistogram) {\n      return ui_1.RangeSlider;\n    }\n\n    return rangeComponent;\n  };\n\n  RangeFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.isDisabled()\n    }, this.renderRangeComponent(this.getRangeComponent()));\n  };\n\n  RangeFilter.prototype.renderRangeComponent = function (component) {\n    var _a = this.props,\n        min = _a.min,\n        max = _a.max,\n        rangeFormatter = _a.rangeFormatter,\n        marks = _a.marks;\n    var state = this.accessor.state.getValue();\n    return core_1.renderComponent(component, {\n      min: min,\n      max: max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      items: this.accessor.getBuckets(),\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch,\n      rangeFormatter: rangeFormatter,\n      marks: marks\n    });\n  };\n\n  RangeFilter.propTypes = defaults({\n    field: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    containerComponent: core_1.RenderComponentPropType,\n    rangeComponent: core_1.RenderComponentPropType,\n    fieldOptions: PropTypes.shape({\n      type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n      options: PropTypes.object\n    }),\n    rangeFormatter: PropTypes.func,\n    marks: PropTypes.object\n  }, core_1.SearchkitComponent.propTypes);\n  RangeFilter.defaultProps = {\n    containerComponent: ui_1.Panel,\n    rangeComponent: ui_1.RangeSliderHistogram,\n    showHistogram: true\n  };\n  return RangeFilter;\n}(core_1.SearchkitComponent);\n\nexports.RangeFilter = RangeFilter;","map":{"version":3,"sources":["../../../../../../src/components/search/filters/range-filter/src/RangeFilter.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PropTypes = require(\"prop-types\");\nvar core_1 = require(\"../../../../../core\");\nvar ui_1 = require(\"../../../../ui\");\nvar defaults = require('lodash/defaults');\nvar get = require('lodash/get');\nvar RangeFilter = /** @class */ (function (_super) {\n    __extends(RangeFilter, _super);\n    function RangeFilter(props) {\n        var _this = _super.call(this, props) || this;\n        _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n        _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n        return _this;\n    }\n    RangeFilter.prototype.defineAccessor = function () {\n        var _a = this.props, id = _a.id, title = _a.title, min = _a.min, max = _a.max, field = _a.field, fieldOptions = _a.fieldOptions, interval = _a.interval, showHistogram = _a.showHistogram, rangeFormatter = _a.rangeFormatter, translations = _a.translations;\n        return new core_1.RangeAccessor(id, {\n            id: id,\n            min: min,\n            max: max,\n            title: title,\n            field: field,\n            rangeFormatter: rangeFormatter,\n            translations: translations,\n            interval: interval,\n            loadHistogram: showHistogram,\n            fieldOptions: fieldOptions\n        });\n    };\n    RangeFilter.prototype.defineBEMBlocks = function () {\n        var block = this.props.mod || 'sk-range-filter';\n        return {\n            container: block,\n            labels: block + '-value-labels'\n        };\n    };\n    RangeFilter.prototype.sliderUpdate = function (newValues) {\n        if (newValues.min == this.props.min && newValues.max == this.props.max) {\n            this.accessor.state = this.accessor.state.clear();\n        }\n        else {\n            this.accessor.state = this.accessor.state.setValue(newValues);\n        }\n        this.forceUpdate();\n    };\n    RangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n        this.sliderUpdate(newValues);\n        this.searchkit.performSearch();\n    };\n    RangeFilter.prototype.getRangeComponent = function () {\n        var _a = this.props, rangeComponent = _a.rangeComponent, showHistogram = _a.showHistogram;\n        if (!showHistogram && rangeComponent === ui_1.RangeSliderHistogram) {\n            return ui_1.RangeSlider;\n        }\n        return rangeComponent;\n    };\n    RangeFilter.prototype.render = function () {\n        if (!this.accessor)\n            return null;\n        var _a = this.props, id = _a.id, title = _a.title, containerComponent = _a.containerComponent;\n        return core_1.renderComponent(containerComponent, {\n            title: title,\n            className: id ? \"filter--\" + id : undefined,\n            disabled: this.accessor.isDisabled()\n        }, this.renderRangeComponent(this.getRangeComponent()));\n    };\n    RangeFilter.prototype.renderRangeComponent = function (component) {\n        var _a = this.props, min = _a.min, max = _a.max, rangeFormatter = _a.rangeFormatter, marks = _a.marks;\n        var state = this.accessor.state.getValue();\n        return core_1.renderComponent(component, {\n            min: min,\n            max: max,\n            minValue: Number(get(state, 'min', min)),\n            maxValue: Number(get(state, 'max', max)),\n            items: this.accessor.getBuckets(),\n            onChange: this.sliderUpdate,\n            onFinished: this.sliderUpdateAndSearch,\n            rangeFormatter: rangeFormatter,\n            marks: marks\n        });\n    };\n    RangeFilter.propTypes = defaults({\n        field: PropTypes.string.isRequired,\n        title: PropTypes.string.isRequired,\n        id: PropTypes.string.isRequired,\n        containerComponent: core_1.RenderComponentPropType,\n        rangeComponent: core_1.RenderComponentPropType,\n        fieldOptions: PropTypes.shape({\n            type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n            options: PropTypes.object\n        }),\n        rangeFormatter: PropTypes.func,\n        marks: PropTypes.object\n    }, core_1.SearchkitComponent.propTypes);\n    RangeFilter.defaultProps = {\n        containerComponent: ui_1.Panel,\n        rangeComponent: ui_1.RangeSliderHistogram,\n        showHistogram: true\n    };\n    return RangeFilter;\n}(core_1.SearchkitComponent));\nexports.RangeFilter = RangeFilter;\n//# sourceMappingURL=RangeFilter.js.map"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar react_1 = require(\"../../../core/react\");\n\nvar ItemComponents_1 = require(\"./ItemComponents\");\n\nvar map = require('lodash/map');\n\nvar includes = require('lodash/includes');\n\nvar sortBy = require('lodash/sortBy');\n\nvar minBy = require('lodash/minBy');\n\nvar maxBy = require('lodash/maxBy');\n\nvar identity = require('lodash/identity');\n\nfunction computeMinMax(items, field) {\n  if (!items || items.length == 0) return {\n    min: 0,\n    max: 0\n  };\n  return {\n    min: minBy(items, field)[field],\n    max: maxBy(items, field)[field]\n  };\n}\n\nvar TagCloud =\n/** @class */\nfunction (_super) {\n  __extends(TagCloud, _super);\n\n  function TagCloud() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TagCloud.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        mod = _a.mod,\n        className = _a.className,\n        disabled = _a.disabled,\n        items = _a.items,\n        translate = _a.translate;\n    var bemBlocks = {\n      container: react_1.block(mod).el,\n      option: react_1.block(mod + \"-option\").el\n    };\n    var sortedItems = sortBy(items, function (it) {\n      return translate(it.title || it.label || it.key).toLowerCase();\n    });\n\n    var _b = computeMinMax(items, 'doc_count'),\n        min = _b.min,\n        max = _b.max;\n\n    return React.createElement(\"div\", {\n      className: bemBlocks.container().mix(className).state({\n        disabled: disabled\n      })\n    }, map(sortedItems, function (item) {\n      return _this.renderItem(item, bemBlocks, min, max);\n    }));\n  };\n\n  TagCloud.prototype.renderItem = function (item, bemBlocks, min, max) {\n    var _a = this.props,\n        itemComponent = _a.itemComponent,\n        minFontSize = _a.minFontSize,\n        maxFontSize = _a.maxFontSize,\n        showCount = _a.showCount,\n        countFormatter = _a.countFormatter,\n        _b = _a.selectedItems,\n        selectedItems = _b === void 0 ? [] : _b,\n        toggleItem = _a.toggleItem,\n        disabled = _a.disabled,\n        translate = _a.translate;\n    var sizeRatio = min === max ? 0.5 : (item.doc_count - min) / (max - min);\n    var fontSize = minFontSize + sizeRatio * (maxFontSize - minFontSize); // TODO : make ratio function customizable (square, log, etc.)\n\n    return react_1.renderComponent(itemComponent, {\n      label: translate(item.title || item.label || item.key),\n      onClick: function () {\n        return toggleItem(item.key);\n      },\n      bemBlocks: bemBlocks,\n      key: item.key,\n      itemKey: item.key,\n      disabled: disabled || item.disabled,\n      active: includes(selectedItems, item.key),\n      style: {\n        fontSize: fontSize + 'em'\n      },\n      showCount: showCount,\n      count: countFormatter(item.doc_count)\n    });\n  };\n\n  TagCloud.defaultProps = {\n    mod: 'sk-tag-cloud',\n    itemComponent: ItemComponents_1.ItemComponent,\n    showCount: false,\n    minFontSize: 1,\n    maxFontSize: 1.5,\n    translate: identity,\n    countFormatter: identity\n  };\n  return TagCloud;\n}(React.PureComponent);\n\nexports.TagCloud = TagCloud;","map":{"version":3,"sources":["../../../../src/components/ui/list/TagCloud.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_1 = require(\"../../../core/react\");\nvar ItemComponents_1 = require(\"./ItemComponents\");\nvar map = require('lodash/map');\nvar includes = require('lodash/includes');\nvar sortBy = require('lodash/sortBy');\nvar minBy = require('lodash/minBy');\nvar maxBy = require('lodash/maxBy');\nvar identity = require('lodash/identity');\nfunction computeMinMax(items, field) {\n    if (!items || items.length == 0)\n        return { min: 0, max: 0 };\n    return {\n        min: minBy(items, field)[field],\n        max: maxBy(items, field)[field]\n    };\n}\nvar TagCloud = /** @class */ (function (_super) {\n    __extends(TagCloud, _super);\n    function TagCloud() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TagCloud.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, mod = _a.mod, className = _a.className, disabled = _a.disabled, items = _a.items, translate = _a.translate;\n        var bemBlocks = {\n            container: react_1.block(mod).el,\n            option: react_1.block(mod + \"-option\").el\n        };\n        var sortedItems = sortBy(items, function (it) {\n            return translate(it.title || it.label || it.key).toLowerCase();\n        });\n        var _b = computeMinMax(items, 'doc_count'), min = _b.min, max = _b.max;\n        return (React.createElement(\"div\", { className: bemBlocks\n                .container()\n                .mix(className)\n                .state({ disabled: disabled }) }, map(sortedItems, function (item) { return _this.renderItem(item, bemBlocks, min, max); })));\n    };\n    TagCloud.prototype.renderItem = function (item, bemBlocks, min, max) {\n        var _a = this.props, itemComponent = _a.itemComponent, minFontSize = _a.minFontSize, maxFontSize = _a.maxFontSize, showCount = _a.showCount, countFormatter = _a.countFormatter, _b = _a.selectedItems, selectedItems = _b === void 0 ? [] : _b, toggleItem = _a.toggleItem, disabled = _a.disabled, translate = _a.translate;\n        var sizeRatio = min === max ? 0.5 : (item.doc_count - min) / (max - min);\n        var fontSize = minFontSize + sizeRatio * (maxFontSize - minFontSize); // TODO : make ratio function customizable (square, log, etc.)\n        return react_1.renderComponent(itemComponent, {\n            label: translate(item.title || item.label || item.key),\n            onClick: function () { return toggleItem(item.key); },\n            bemBlocks: bemBlocks,\n            key: item.key,\n            itemKey: item.key,\n            disabled: disabled || item.disabled,\n            active: includes(selectedItems, item.key),\n            style: { fontSize: fontSize + 'em' },\n            showCount: showCount,\n            count: countFormatter(item.doc_count)\n        });\n    };\n    TagCloud.defaultProps = {\n        mod: 'sk-tag-cloud',\n        itemComponent: ItemComponents_1.ItemComponent,\n        showCount: false,\n        minFontSize: 1,\n        maxFontSize: 1.5,\n        translate: identity,\n        countFormatter: identity\n    };\n    return TagCloud;\n}(React.PureComponent));\nexports.TagCloud = TagCloud;\n//# sourceMappingURL=TagCloud.js.map"]},"metadata":{},"sourceType":"script"}
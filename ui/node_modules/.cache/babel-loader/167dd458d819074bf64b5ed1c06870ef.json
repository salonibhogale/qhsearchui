{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Accessor_1 = require(\"./Accessor\");\n\nvar StatefulAccessor =\n/** @class */\nfunction (_super) {\n  __extends(StatefulAccessor, _super);\n\n  function StatefulAccessor(key, urlString) {\n    var _this = _super.call(this) || this;\n\n    _this.key = key;\n    _this.urlKey = urlString || key && key.replace(/\\./g, '_');\n    _this.urlWithState = _this.urlWithState.bind(_this);\n    return _this;\n  }\n\n  StatefulAccessor.prototype.onStateChange = function () {};\n\n  StatefulAccessor.prototype.fromQueryObject = function (ob) {\n    var value = ob[this.urlKey];\n    this.state = this.state.setValue(value);\n  };\n\n  StatefulAccessor.prototype.getQueryObject = function () {\n    var _a;\n\n    var val = this.state.getValue();\n    return val ? (_a = {}, _a[this.urlKey] = val, _a) : {};\n  };\n\n  StatefulAccessor.prototype.setSearchkitManager = function (searchkit) {\n    _super.prototype.setSearchkitManager.call(this, searchkit);\n\n    this.uuid = this.key + this.uuid;\n    this.fromQueryObject(searchkit.state);\n    searchkit.query = searchkit.buildQuery();\n    this.setResultsState();\n  };\n\n  StatefulAccessor.prototype.setResults = function (results) {\n    _super.prototype.setResults.call(this, results);\n\n    this.setResultsState();\n  };\n\n  StatefulAccessor.prototype.setResultsState = function () {\n    this.resultsState = this.state;\n  };\n\n  StatefulAccessor.prototype.resetState = function () {\n    this.state = this.state.clear();\n  };\n\n  StatefulAccessor.prototype.urlWithState = function (state) {\n    var _a;\n\n    return this.searchkit.buildSearchUrl((_a = {}, _a[this.urlKey] = state, _a));\n  };\n\n  return StatefulAccessor;\n}(Accessor_1.Accessor);\n\nexports.StatefulAccessor = StatefulAccessor;","map":{"version":3,"sources":["../../../src/core/accessors/StatefulAccessor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AAEA,IAAA,gBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4D,EAAA,SAAA,CAAA,gBAAA,EAAA,MAAA,CAAA;;AAM1D,WAAA,gBAAA,CAAY,GAAZ,EAAiB,SAAjB,EAA2B;AAA3B,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADT;;AAEE,IAAA,KAAI,CAAC,GAAL,GAAW,GAAX;AACA,IAAA,KAAI,CAAC,MAAL,GAAc,SAAS,IAAK,GAAG,IAAI,GAAG,CAAC,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,CAAnC;AACA,IAAA,KAAI,CAAC,YAAL,GAAoB,KAAI,CAAC,YAAL,CAAkB,IAAlB,CAAuB,KAAvB,CAApB;;AACD;;AAED,EAAA,gBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,YAAA,CAAkB,CAAlB;;AAEA,EAAA,gBAAA,CAAA,SAAA,CAAA,eAAA,GAAA,UAAgB,EAAhB,EAAkB;AAChB,QAAM,KAAK,GAAG,EAAE,CAAC,KAAK,MAAN,CAAhB;AACA,SAAK,KAAL,GAAa,KAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAAb;AACD,GAHD;;AAKA,EAAA,gBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;;;AACE,QAAM,GAAG,GAAG,KAAK,KAAL,CAAW,QAAX,EAAZ;AACA,WAAO,GAAG,IACP,EAAA,GAAA,EAAA,EACG,EAAA,CAAC,KAAK,MAAN,CAAA,GAAe,GADlB,EAGD,EAJQ,IAIN,EAJJ;AAKD,GAPD;;AASA,EAAA,gBAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,UAAoB,SAApB,EAA6B;AAC3B,IAAA,MAAA,CAAA,SAAA,CAAM,mBAAN,CAAyB,IAAzB,CAAyB,IAAzB,EAA0B,SAA1B;;AACA,SAAK,IAAL,GAAY,KAAK,GAAL,GAAW,KAAK,IAA5B;AACA,SAAK,eAAL,CAAqB,SAAS,CAAC,KAA/B;AACA,IAAA,SAAS,CAAC,KAAV,GAAkB,SAAS,CAAC,UAAV,EAAlB;AACA,SAAK,eAAL;AACD,GAND;;AAQA,EAAA,gBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,OAAX,EAAkB;AAChB,IAAA,MAAA,CAAA,SAAA,CAAM,UAAN,CAAgB,IAAhB,CAAgB,IAAhB,EAAiB,OAAjB;;AACA,SAAK,eAAL;AACD,GAHD;;AAKA,EAAA,gBAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACE,SAAK,YAAL,GAAoB,KAAK,KAAzB;AACD,GAFD;;AAIA,EAAA,gBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACE,SAAK,KAAL,GAAa,KAAK,KAAL,CAAW,KAAX,EAAb;AACD,GAFD;;AAIA,EAAA,gBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,KAAb,EAAqB;;;AACnB,WAAO,KAAK,SAAL,CAAe,cAAf,EAA6B,EAAA,GAAA,EAAA,EAAG,EAAA,CAAC,KAAK,MAAN,CAAA,GAAe,KAAlB,EAAuB,EAApD,EAAP;AACD,GAFD;;AAGF,SAAA,gBAAA;AAAC,CArDD,CAA4D,UAAA,CAAA,QAA5D,CAAA;;AAAa,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Accessor_1 = require(\"./Accessor\");\nvar StatefulAccessor = /** @class */ (function (_super) {\n    __extends(StatefulAccessor, _super);\n    function StatefulAccessor(key, urlString) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.urlKey = urlString || (key && key.replace(/\\./g, '_'));\n        _this.urlWithState = _this.urlWithState.bind(_this);\n        return _this;\n    }\n    StatefulAccessor.prototype.onStateChange = function () { };\n    StatefulAccessor.prototype.fromQueryObject = function (ob) {\n        var value = ob[this.urlKey];\n        this.state = this.state.setValue(value);\n    };\n    StatefulAccessor.prototype.getQueryObject = function () {\n        var _a;\n        var val = this.state.getValue();\n        return val\n            ? (_a = {},\n                _a[this.urlKey] = val,\n                _a) : {};\n    };\n    StatefulAccessor.prototype.setSearchkitManager = function (searchkit) {\n        _super.prototype.setSearchkitManager.call(this, searchkit);\n        this.uuid = this.key + this.uuid;\n        this.fromQueryObject(searchkit.state);\n        searchkit.query = searchkit.buildQuery();\n        this.setResultsState();\n    };\n    StatefulAccessor.prototype.setResults = function (results) {\n        _super.prototype.setResults.call(this, results);\n        this.setResultsState();\n    };\n    StatefulAccessor.prototype.setResultsState = function () {\n        this.resultsState = this.state;\n    };\n    StatefulAccessor.prototype.resetState = function () {\n        this.state = this.state.clear();\n    };\n    StatefulAccessor.prototype.urlWithState = function (state) {\n        var _a;\n        return this.searchkit.buildSearchUrl((_a = {}, _a[this.urlKey] = state, _a));\n    };\n    return StatefulAccessor;\n}(Accessor_1.Accessor));\nexports.StatefulAccessor = StatefulAccessor;\n//# sourceMappingURL=StatefulAccessor.js.map"]},"metadata":{},"sourceType":"script"}
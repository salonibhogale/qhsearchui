{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar State_1 = require(\"./State\");\n\nvar isArray = require('lodash/isArray');\n\nvar take = require('lodash/take');\n\nvar size = require('lodash/size');\n\nvar without = require('lodash/without');\n\nvar indexOf = require('lodash/indexOf');\n\nvar update = require('immutability-helper');\n\nvar LevelState =\n/** @class */\nfunction (_super) {\n  __extends(LevelState, _super);\n\n  function LevelState() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LevelState.prototype.getValue = function () {\n    return this.value || [];\n  };\n\n  LevelState.prototype.add = function (level, val) {\n    var _a, _b;\n\n    var ob = this.getValue();\n\n    if (!isArray(ob[level])) {\n      ob = update(ob, (_a = {}, _a[level] = {\n        $set: []\n      }, _a));\n    }\n\n    ob = update(ob, (_b = {}, _b[level] = {\n      $push: [val]\n    }, _b));\n    return this.create(ob);\n  };\n\n  LevelState.prototype.contains = function (level, val) {\n    return indexOf(this.getValue()[level], val) !== -1;\n  };\n\n  LevelState.prototype.clear = function (level) {\n    if (level === void 0) {\n      level = 0;\n    }\n\n    return this.create(take(this.getValue(), level));\n  };\n\n  LevelState.prototype.remove = function (level, val) {\n    var _a;\n\n    return this.create(update(this.getValue(), (_a = {}, _a[level] = {\n      $set: without(this.getValue()[level], val)\n    }, _a)));\n  };\n\n  LevelState.prototype.toggle = function (level, val) {\n    if (this.contains(level, val)) {\n      return this.remove(level, val);\n    }\n\n    return this.add(level, val);\n  };\n\n  LevelState.prototype.getLevel = function (level) {\n    return this.getValue()[level] || [];\n  };\n\n  LevelState.prototype.levelHasFilters = function (level) {\n    return this.getLevel(level).length > 0;\n  };\n\n  LevelState.prototype.getLeafLevel = function () {\n    return size(this.value) - 1;\n  };\n\n  LevelState.prototype.isLeafLevel = function (level) {\n    return level === this.getLeafLevel();\n  };\n\n  LevelState.prototype.toggleLevel = function (level, key) {\n    if (this.contains(level, key)) {\n      if (this.isLeafLevel(level)) {\n        return this.clear(level);\n      }\n\n      return this.clear(level + 1);\n    }\n\n    return this.clear(level).add(level, key);\n  };\n\n  return LevelState;\n}(State_1.State);\n\nexports.LevelState = LevelState;","map":{"version":3,"sources":["../../../src/core/state/LevelState.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar State_1 = require(\"./State\");\nvar isArray = require('lodash/isArray');\nvar take = require('lodash/take');\nvar size = require('lodash/size');\nvar without = require('lodash/without');\nvar indexOf = require('lodash/indexOf');\nvar update = require('immutability-helper');\nvar LevelState = /** @class */ (function (_super) {\n    __extends(LevelState, _super);\n    function LevelState() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LevelState.prototype.getValue = function () {\n        return this.value || [];\n    };\n    LevelState.prototype.add = function (level, val) {\n        var _a, _b;\n        var ob = this.getValue();\n        if (!isArray(ob[level])) {\n            ob = update(ob, (_a = {},\n                _a[level] = { $set: [] },\n                _a));\n        }\n        ob = update(ob, (_b = {},\n            _b[level] = { $push: [val] },\n            _b));\n        return this.create(ob);\n    };\n    LevelState.prototype.contains = function (level, val) {\n        return indexOf(this.getValue()[level], val) !== -1;\n    };\n    LevelState.prototype.clear = function (level) {\n        if (level === void 0) { level = 0; }\n        return this.create(take(this.getValue(), level));\n    };\n    LevelState.prototype.remove = function (level, val) {\n        var _a;\n        return this.create(update(this.getValue(), (_a = {},\n            _a[level] = { $set: without(this.getValue()[level], val) },\n            _a)));\n    };\n    LevelState.prototype.toggle = function (level, val) {\n        if (this.contains(level, val)) {\n            return this.remove(level, val);\n        }\n        return this.add(level, val);\n    };\n    LevelState.prototype.getLevel = function (level) {\n        return this.getValue()[level] || [];\n    };\n    LevelState.prototype.levelHasFilters = function (level) {\n        return this.getLevel(level).length > 0;\n    };\n    LevelState.prototype.getLeafLevel = function () {\n        return size(this.value) - 1;\n    };\n    LevelState.prototype.isLeafLevel = function (level) {\n        return level === this.getLeafLevel();\n    };\n    LevelState.prototype.toggleLevel = function (level, key) {\n        if (this.contains(level, key)) {\n            if (this.isLeafLevel(level)) {\n                return this.clear(level);\n            }\n            return this.clear(level + 1);\n        }\n        return this.clear(level).add(level, key);\n    };\n    return LevelState;\n}(State_1.State));\nexports.LevelState = LevelState;\n//# sourceMappingURL=LevelState.js.map"]},"metadata":{},"sourceType":"script"}
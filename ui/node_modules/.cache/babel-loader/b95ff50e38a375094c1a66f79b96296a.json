{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar state_1 = require(\"../state\");\n\nvar query_1 = require(\"../query\");\n\nvar FilterBasedAccessor_1 = require(\"./FilterBasedAccessor\");\n\nvar assign = require('lodash/assign');\n\nvar CheckboxFilterAccessor =\n/** @class */\nfunction (_super) {\n  __extends(CheckboxFilterAccessor, _super);\n\n  function CheckboxFilterAccessor(key, options) {\n    var _this = _super.call(this, key, options.id) || this;\n\n    _this.state = new state_1.State(false);\n    _this.options = options;\n    _this.filter = options.filter;\n    _this.state = _this.state.create(options.defaultValue);\n    _this.translations = assign({}, options.translations);\n    return _this;\n  }\n\n  CheckboxFilterAccessor.prototype.getDocCount = function () {\n    return this.getAggregations([this.uuid, 'doc_count'], 0);\n  };\n\n  CheckboxFilterAccessor.prototype.buildSharedQuery = function (query) {\n    var _this = this;\n\n    if (this.state.getValue()) {\n      query = query.addFilter(this.uuid, this.filter).addSelectedFilter({\n        name: this.options.title || this.translate(this.key),\n        value: this.options.label || this.translate('checkbox.on'),\n        id: this.options.id,\n        remove: function () {\n          return _this.state = _this.state.setValue(false);\n        }\n      });\n    }\n\n    return query;\n  };\n\n  CheckboxFilterAccessor.prototype.buildOwnQuery = function (query) {\n    var filters = query.getFilters();\n\n    if (!this.state.getValue()) {\n      if (filters) filters = query_1.BoolMust([filters, this.filter]);else filters = this.filter;\n    }\n\n    return query.setAggs(query_1.FilterBucket(this.uuid, filters));\n  };\n\n  CheckboxFilterAccessor.translations = {\n    'checkbox.on': 'active'\n  };\n  return CheckboxFilterAccessor;\n}(FilterBasedAccessor_1.FilterBasedAccessor);\n\nexports.CheckboxFilterAccessor = CheckboxFilterAccessor;","map":{"version":3,"sources":["../../../src/core/accessors/CheckboxFilterAccessor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,qBAAA,GAAA,OAAA,CAAA,uBAAA,CAAA;;AAEA,IAAM,MAAM,GAAG,OAAO,CAAC,eAAD,CAAtB;;AAWA,IAAA,sBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;;AAU1C,WAAA,sBAAA,CAAY,GAAZ,EAAiB,OAAjB,EAAuD;AAAvD,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,GAAN,EAAW,OAAO,CAAC,EAAnB,KAAsB,IADxB;;AATA,IAAA,KAAA,CAAA,KAAA,GAAQ,IAAI,OAAA,CAAA,KAAJ,CAAmB,KAAnB,CAAR;AAWE,IAAA,KAAI,CAAC,OAAL,GAAe,OAAf;AACA,IAAA,KAAI,CAAC,MAAL,GAAc,OAAO,CAAC,MAAtB;AACA,IAAA,KAAI,CAAC,KAAL,GAAa,KAAI,CAAC,KAAL,CAAW,MAAX,CAAkB,OAAO,CAAC,YAA1B,CAAb;AACA,IAAA,KAAI,CAAC,YAAL,GAAoB,MAAM,CAAC,EAAD,EAAK,OAAO,CAAC,YAAb,CAA1B;;AACD;;AAED,EAAA,sBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACE,WAAO,KAAK,eAAL,CAAqB,CAAC,KAAK,IAAN,EAAY,WAAZ,CAArB,EAA+C,CAA/C,CAAP;AACD,GAFD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,UAAiB,KAAjB,EAAsB;AAAtB,QAAA,KAAA,GAAA,IAAA;;AACE,QAAI,KAAK,KAAL,CAAW,QAAX,EAAJ,EAA2B;AACzB,MAAA,KAAK,GAAG,KAAK,CAAC,SAAN,CAAgB,KAAK,IAArB,EAA2B,KAAK,MAAhC,EAAwC,iBAAxC,CAA0D;AAChE,QAAA,IAAI,EAAE,KAAK,OAAL,CAAa,KAAb,IAAsB,KAAK,SAAL,CAAe,KAAK,GAApB,CADoC;AAEhE,QAAA,KAAK,EAAE,KAAK,OAAL,CAAa,KAAb,IAAsB,KAAK,SAAL,CAAe,aAAf,CAFmC;AAGhE,QAAA,EAAE,EAAE,KAAK,OAAL,CAAa,EAH+C;AAIhE,QAAA,MAAM,EAAE,YAAA;AAAM,iBAAC,KAAI,CAAC,KAAL,GAAa,KAAI,CAAC,KAAL,CAAW,QAAX,CAAd,KAAc,CAAd;AAAyC;AAJS,OAA1D,CAAR;AAMD;;AAED,WAAO,KAAP;AACD,GAXD;;AAaA,EAAA,sBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,KAAd,EAAmB;AACjB,QAAI,OAAO,GAAG,KAAK,CAAC,UAAN,EAAd;;AACA,QAAI,CAAC,KAAK,KAAL,CAAW,QAAX,EAAL,EAA4B;AAC1B,UAAI,OAAJ,EAAa,OAAO,GAAG,OAAA,CAAA,QAAA,CAAS,CAAC,OAAD,EAAU,KAAK,MAAf,CAAT,CAAV,CAAb,KACK,OAAO,GAAG,KAAK,MAAf;AACN;;AACD,WAAO,KAAK,CAAC,OAAN,CAAc,OAAA,CAAA,YAAA,CAAa,KAAK,IAAlB,EAAwB,OAAxB,CAAd,CAAP;AACD,GAPD;;AA7BO,EAAA,sBAAA,CAAA,YAAA,GAAoB;AACzB,mBAAe;AADU,GAApB;AAqCT,SAAA,sBAAA;AAAC,CA3CD,CAA4C,qBAAA,CAAA,mBAA5C,CAAA;;AAAa,OAAA,CAAA,sBAAA,GAAA,sBAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar state_1 = require(\"../state\");\nvar query_1 = require(\"../query\");\nvar FilterBasedAccessor_1 = require(\"./FilterBasedAccessor\");\nvar assign = require('lodash/assign');\nvar CheckboxFilterAccessor = /** @class */ (function (_super) {\n    __extends(CheckboxFilterAccessor, _super);\n    function CheckboxFilterAccessor(key, options) {\n        var _this = _super.call(this, key, options.id) || this;\n        _this.state = new state_1.State(false);\n        _this.options = options;\n        _this.filter = options.filter;\n        _this.state = _this.state.create(options.defaultValue);\n        _this.translations = assign({}, options.translations);\n        return _this;\n    }\n    CheckboxFilterAccessor.prototype.getDocCount = function () {\n        return this.getAggregations([this.uuid, 'doc_count'], 0);\n    };\n    CheckboxFilterAccessor.prototype.buildSharedQuery = function (query) {\n        var _this = this;\n        if (this.state.getValue()) {\n            query = query.addFilter(this.uuid, this.filter).addSelectedFilter({\n                name: this.options.title || this.translate(this.key),\n                value: this.options.label || this.translate('checkbox.on'),\n                id: this.options.id,\n                remove: function () { return (_this.state = _this.state.setValue(false)); }\n            });\n        }\n        return query;\n    };\n    CheckboxFilterAccessor.prototype.buildOwnQuery = function (query) {\n        var filters = query.getFilters();\n        if (!this.state.getValue()) {\n            if (filters)\n                filters = query_1.BoolMust([filters, this.filter]);\n            else\n                filters = this.filter;\n        }\n        return query.setAggs(query_1.FilterBucket(this.uuid, filters));\n    };\n    CheckboxFilterAccessor.translations = {\n        'checkbox.on': 'active'\n    };\n    return CheckboxFilterAccessor;\n}(FilterBasedAccessor_1.FilterBasedAccessor));\nexports.CheckboxFilterAccessor = CheckboxFilterAccessor;\n//# sourceMappingURL=CheckboxFilterAccessor.js.map"]},"metadata":{},"sourceType":"script"}
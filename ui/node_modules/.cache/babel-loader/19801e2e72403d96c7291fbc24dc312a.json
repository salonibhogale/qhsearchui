{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar SearchkitManager_1 = require(\"../SearchkitManager\");\n\nvar support_1 = require(\"../support\");\n\nvar block_1 = require(\"./block\");\n\nvar mapValues = require('lodash/mapValues');\n\nvar SearchkitComponent =\n/** @class */\nfunction (_super) {\n  __extends(SearchkitComponent, _super);\n\n  function SearchkitComponent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.translations = {};\n    _this.unmounted = false;\n    _this.translate = _this.translate.bind(_this);\n    return _this;\n  }\n\n  SearchkitComponent.prototype.defineBEMBlocks = function () {\n    return null;\n  };\n\n  SearchkitComponent.prototype.defineAccessor = function () {\n    return null;\n  };\n\n  SearchkitComponent.prototype.translate = function (key, interpolations) {\n    var translation = this.searchkit.translate(key) || this.props.translations && this.props.translations[key] || this.translations[key] || key;\n    return support_1.Utils.translate(translation, interpolations);\n  };\n\n  Object.defineProperty(SearchkitComponent.prototype, \"bemBlocks\", {\n    get: function () {\n      return mapValues(this.defineBEMBlocks(), function (cssClass) {\n        return block_1.block(cssClass).el;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SearchkitComponent.prototype, \"searchkit\", {\n    get: function () {\n      return this._searchkit || (this._searchkit = this._getSearchkit());\n    },\n    set: function (value) {\n      this._searchkit = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SearchkitComponent.prototype._getSearchkit = function () {\n    return this.props.searchkit || this.context.searchkit;\n  };\n\n  SearchkitComponent.prototype.componentDidMount = function () {\n    var _this = this;\n\n    this._initAccessor();\n\n    if (this.searchkit) {\n      this.stateListenerUnsubscribe = this.searchkit.emitter.addListener(function () {\n        if (!_this.unmounted) {\n          _this.forceUpdate();\n        }\n      });\n    }\n\n    this.forceUpdate();\n  };\n\n  SearchkitComponent.prototype._initAccessor = function () {\n    if (this.searchkit && !this.accessor) {\n      this.accessor = this.defineAccessor();\n\n      if (this.accessor) {\n        this.accessor = this.searchkit.addAccessor(this.accessor);\n        return true;\n      }\n    }\n\n    if (!this.searchkit) {\n      console.warn('No searchkit found in props or context for ' + this.constructor.name);\n    }\n\n    return false;\n  };\n\n  SearchkitComponent.prototype.componentWillUnmount = function () {\n    if (this.stateListenerUnsubscribe) {\n      this.stateListenerUnsubscribe();\n    }\n\n    if (this.searchkit && this.accessor) {\n      this.searchkit.removeAccessor(this.accessor);\n    }\n\n    this.unmounted = true;\n  };\n\n  SearchkitComponent.prototype.getResults = function () {\n    return this.searchkit.results;\n  };\n\n  SearchkitComponent.prototype.getHits = function () {\n    return this.searchkit.getHits();\n  };\n\n  SearchkitComponent.prototype.getHitsCount = function () {\n    return this.searchkit.getHitsCount();\n  };\n\n  SearchkitComponent.prototype.hasHits = function () {\n    return this.searchkit.hasHits();\n  };\n\n  SearchkitComponent.prototype.hasHitsChanged = function () {\n    return this.searchkit.hasHitsChanged();\n  };\n\n  SearchkitComponent.prototype.getQuery = function () {\n    return this.searchkit.query;\n  };\n\n  SearchkitComponent.prototype.isInitialLoading = function () {\n    return this.searchkit.initialLoading;\n  };\n\n  SearchkitComponent.prototype.isLoading = function () {\n    return this.searchkit.loading;\n  };\n\n  SearchkitComponent.prototype.getError = function () {\n    return this.searchkit.error;\n  };\n\n  SearchkitComponent.contextTypes = {\n    searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n  };\n\n  SearchkitComponent.translationsPropType = function (translations) {\n    return PropTypes.shape(mapValues(translations, function () {\n      return PropTypes.string;\n    }));\n  };\n\n  SearchkitComponent.propTypes = {\n    mod: PropTypes.string,\n    className: PropTypes.string,\n    translations: PropTypes.objectOf(PropTypes.string),\n    searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n  };\n  return SearchkitComponent;\n}(React.Component);\n\nexports.SearchkitComponent = SearchkitComponent;","map":{"version":3,"sources":["../../../src/core/react/SearchkitComponent.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar SearchkitManager_1 = require(\"../SearchkitManager\");\nvar support_1 = require(\"../support\");\nvar block_1 = require(\"./block\");\nvar mapValues = require('lodash/mapValues');\nvar SearchkitComponent = /** @class */ (function (_super) {\n    __extends(SearchkitComponent, _super);\n    function SearchkitComponent(props) {\n        var _this = _super.call(this, props) || this;\n        _this.translations = {};\n        _this.unmounted = false;\n        _this.translate = _this.translate.bind(_this);\n        return _this;\n    }\n    SearchkitComponent.prototype.defineBEMBlocks = function () {\n        return null;\n    };\n    SearchkitComponent.prototype.defineAccessor = function () {\n        return null;\n    };\n    SearchkitComponent.prototype.translate = function (key, interpolations) {\n        var translation = this.searchkit.translate(key) ||\n            (this.props.translations && this.props.translations[key]) ||\n            this.translations[key] ||\n            key;\n        return support_1.Utils.translate(translation, interpolations);\n    };\n    Object.defineProperty(SearchkitComponent.prototype, \"bemBlocks\", {\n        get: function () {\n            return mapValues(this.defineBEMBlocks(), function (cssClass) { return block_1.block(cssClass).el; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SearchkitComponent.prototype, \"searchkit\", {\n        get: function () {\n            return this._searchkit || (this._searchkit = this._getSearchkit());\n        },\n        set: function (value) {\n            this._searchkit = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SearchkitComponent.prototype._getSearchkit = function () {\n        return this.props.searchkit || this.context.searchkit;\n    };\n    SearchkitComponent.prototype.componentDidMount = function () {\n        var _this = this;\n        this._initAccessor();\n        if (this.searchkit) {\n            this.stateListenerUnsubscribe = this.searchkit.emitter.addListener(function () {\n                if (!_this.unmounted) {\n                    _this.forceUpdate();\n                }\n            });\n        }\n        this.forceUpdate();\n    };\n    SearchkitComponent.prototype._initAccessor = function () {\n        if (this.searchkit && !this.accessor) {\n            this.accessor = this.defineAccessor();\n            if (this.accessor) {\n                this.accessor = this.searchkit.addAccessor(this.accessor);\n                return true;\n            }\n        }\n        if (!this.searchkit) {\n            console.warn('No searchkit found in props or context for ' + this.constructor.name);\n        }\n        return false;\n    };\n    SearchkitComponent.prototype.componentWillUnmount = function () {\n        if (this.stateListenerUnsubscribe) {\n            this.stateListenerUnsubscribe();\n        }\n        if (this.searchkit && this.accessor) {\n            this.searchkit.removeAccessor(this.accessor);\n        }\n        this.unmounted = true;\n    };\n    SearchkitComponent.prototype.getResults = function () {\n        return this.searchkit.results;\n    };\n    SearchkitComponent.prototype.getHits = function () {\n        return this.searchkit.getHits();\n    };\n    SearchkitComponent.prototype.getHitsCount = function () {\n        return this.searchkit.getHitsCount();\n    };\n    SearchkitComponent.prototype.hasHits = function () {\n        return this.searchkit.hasHits();\n    };\n    SearchkitComponent.prototype.hasHitsChanged = function () {\n        return this.searchkit.hasHitsChanged();\n    };\n    SearchkitComponent.prototype.getQuery = function () {\n        return this.searchkit.query;\n    };\n    SearchkitComponent.prototype.isInitialLoading = function () {\n        return this.searchkit.initialLoading;\n    };\n    SearchkitComponent.prototype.isLoading = function () {\n        return this.searchkit.loading;\n    };\n    SearchkitComponent.prototype.getError = function () {\n        return this.searchkit.error;\n    };\n    SearchkitComponent.contextTypes = {\n        searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n    };\n    SearchkitComponent.translationsPropType = function (translations) {\n        return PropTypes.shape(mapValues(translations, function () { return PropTypes.string; }));\n    };\n    SearchkitComponent.propTypes = {\n        mod: PropTypes.string,\n        className: PropTypes.string,\n        translations: PropTypes.objectOf(PropTypes.string),\n        searchkit: PropTypes.instanceOf(SearchkitManager_1.SearchkitManager)\n    };\n    return SearchkitComponent;\n}(React.Component));\nexports.SearchkitComponent = SearchkitComponent;\n//# sourceMappingURL=SearchkitComponent.js.map"]},"metadata":{},"sourceType":"script"}
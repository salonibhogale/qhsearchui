{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"../../core\");\n\nvar StatefulAccessor_1 = require(\"./StatefulAccessor\");\n\nvar head = require('lodash/head');\n\nvar find = require('lodash/find');\n\nvar ViewOptionsAccessor =\n/** @class */\nfunction (_super) {\n  __extends(ViewOptionsAccessor, _super);\n\n  function ViewOptionsAccessor(key, options) {\n    var _this = _super.call(this, key) || this;\n\n    _this.state = new core_1.ValueState();\n    _this.options = options;\n    return _this;\n  }\n\n  ViewOptionsAccessor.prototype.getSelectedOption = function () {\n    return find(this.options, {\n      key: this.state.getValue()\n    }) || find(this.options, {\n      defaultOption: true\n    }) || head(this.options);\n  };\n\n  ViewOptionsAccessor.prototype.setView = function (key) {\n    var view = find(this.options, {\n      key: key\n    });\n\n    if (view) {\n      if (view.defaultOption) {\n        this.state = this.state.clear();\n      } else {\n        this.state = this.state.setValue(view.key);\n      }\n\n      this.search();\n    }\n  };\n\n  ViewOptionsAccessor.prototype.search = function () {\n    //this won't fire search as query didn't change, but it will serialize url\n    //might need better way\n    this.searchkit.performSearch(false, false);\n    this.searchkit.emitter.trigger();\n  };\n\n  return ViewOptionsAccessor;\n}(StatefulAccessor_1.StatefulAccessor);\n\nexports.ViewOptionsAccessor = ViewOptionsAccessor;","map":{"version":3,"sources":["../../../src/core/accessors/ViewOptionsAccessor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AACA,IAAM,IAAI,GAAG,OAAO,CAAC,aAAD,CAApB;;AACA,IAAM,IAAI,GAAG,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAA,mBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAyC,EAAA,SAAA,CAAA,mBAAA,EAAA,MAAA,CAAA;;AAGvC,WAAA,mBAAA,CAAY,GAAZ,EAAiB,OAAjB,EAAoC;AAApC,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,GAAN,KAAU,IADZ;;AAFA,IAAA,KAAA,CAAA,KAAA,GAAQ,IAAI,MAAA,CAAA,UAAJ,EAAR;AAIE,IAAA,KAAI,CAAC,OAAL,GAAe,OAAf;;AACD;;AAED,EAAA,mBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACE,WACE,IAAI,CAAC,KAAK,OAAN,EAAe;AAAE,MAAA,GAAG,EAAE,KAAK,KAAL,CAAW,QAAX;AAAP,KAAf,CAAJ,IACA,IAAI,CAAC,KAAK,OAAN,EAAe;AAAE,MAAA,aAAa,EAAE;AAAjB,KAAf,CADJ,IAEA,IAAI,CAAC,KAAK,OAAN,CAHN;AAKD,GAND;;AAQA,EAAA,mBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,GAAR,EAAW;AACT,QAAM,IAAI,GAAG,IAAI,CAAC,KAAK,OAAN,EAAe;AAAE,MAAA,GAAG,EAAA;AAAL,KAAf,CAAjB;;AACA,QAAI,IAAJ,EAAU;AACR,UAAI,IAAI,CAAC,aAAT,EAAwB;AACtB,aAAK,KAAL,GAAa,KAAK,KAAL,CAAW,KAAX,EAAb;AACD,OAFD,MAEO;AACL,aAAK,KAAL,GAAa,KAAK,KAAL,CAAW,QAAX,CAAoB,IAAI,CAAC,GAAzB,CAAb;AACD;;AACD,WAAK,MAAL;AACD;AACF,GAVD;;AAYA,EAAA,mBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE;AACA;AACA,SAAK,SAAL,CAAe,aAAf,CAA6B,KAA7B,EAAoC,KAApC;AACA,SAAK,SAAL,CAAe,OAAf,CAAuB,OAAvB;AACD,GALD;;AAMF,SAAA,mBAAA;AAAC,CAlCD,CAAyC,kBAAA,CAAA,gBAAzC,CAAA;;AAAa,OAAA,CAAA,mBAAA,GAAA,mBAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"../../core\");\nvar StatefulAccessor_1 = require(\"./StatefulAccessor\");\nvar head = require('lodash/head');\nvar find = require('lodash/find');\nvar ViewOptionsAccessor = /** @class */ (function (_super) {\n    __extends(ViewOptionsAccessor, _super);\n    function ViewOptionsAccessor(key, options) {\n        var _this = _super.call(this, key) || this;\n        _this.state = new core_1.ValueState();\n        _this.options = options;\n        return _this;\n    }\n    ViewOptionsAccessor.prototype.getSelectedOption = function () {\n        return (find(this.options, { key: this.state.getValue() }) ||\n            find(this.options, { defaultOption: true }) ||\n            head(this.options));\n    };\n    ViewOptionsAccessor.prototype.setView = function (key) {\n        var view = find(this.options, { key: key });\n        if (view) {\n            if (view.defaultOption) {\n                this.state = this.state.clear();\n            }\n            else {\n                this.state = this.state.setValue(view.key);\n            }\n            this.search();\n        }\n    };\n    ViewOptionsAccessor.prototype.search = function () {\n        //this won't fire search as query didn't change, but it will serialize url\n        //might need better way\n        this.searchkit.performSearch(false, false);\n        this.searchkit.emitter.trigger();\n    };\n    return ViewOptionsAccessor;\n}(StatefulAccessor_1.StatefulAccessor));\nexports.ViewOptionsAccessor = ViewOptionsAccessor;\n//# sourceMappingURL=ViewOptionsAccessor.js.map"]},"metadata":{},"sourceType":"script"}
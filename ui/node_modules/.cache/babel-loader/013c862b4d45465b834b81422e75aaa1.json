{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar axios_1 = require(\"axios\");\n\nvar ESTransport_1 = require(\"./ESTransport\");\n\nvar defaults = require('lodash/defaults');\n\nvar AxiosESTransport =\n/** @class */\nfunction (_super) {\n  __extends(AxiosESTransport, _super);\n\n  function AxiosESTransport(host, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.host = host;\n    _this.options = defaults(options, {\n      headers: {},\n      searchUrlPath: '/_search',\n      timeout: AxiosESTransport.timeout\n    });\n    var credentials = AxiosESTransport.parseCredentials(_this.options);\n    var config = defaults(credentials, {\n      baseURL: _this.host,\n      timeout: _this.options.timeout,\n      headers: _this.options.headers\n    });\n    _this.axios = axios_1.default.create(config);\n    return _this;\n  }\n\n  AxiosESTransport.prototype.search = function (query) {\n    return this.axios.post(this.options.searchUrlPath, query).then(this.getData);\n  };\n\n  AxiosESTransport.prototype.getData = function (response) {\n    return response.data;\n  };\n\n  AxiosESTransport.parseCredentials = function (options) {\n    var credentials = {};\n\n    if (options.basicAuth !== undefined) {\n      var parsed = options.basicAuth.split(':');\n      var auth = {\n        username: parsed[0],\n        password: parsed[1]\n      };\n      credentials.auth = auth;\n    }\n\n    if (options.withCredentials) {\n      credentials.withCredentials = true;\n    }\n\n    return credentials;\n  };\n\n  AxiosESTransport.timeout = 5000;\n  return AxiosESTransport;\n}(ESTransport_1.ESTransport);\n\nexports.AxiosESTransport = AxiosESTransport;","map":{"version":3,"sources":["../../../src/core/transport/AxiosESTransport.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AACA,IAAM,QAAQ,GAAG,OAAO,CAAC,iBAAD,CAAxB;;AAUA,IAAA,gBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAsC,EAAA,SAAA,CAAA,gBAAA,EAAA,MAAA,CAAA;;AAKpC,WAAA,gBAAA,CAAmB,IAAnB,EAAiC,OAAjC,EAAiE;AAAhC,QAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,OAAA,GAAA,EAAA;AAAgC;;AAAjE,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADT;;AAAmB,IAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AAEjB,IAAA,KAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,OAAD,EAAU;AAC/B,MAAA,OAAO,EAAE,EADsB;AAE/B,MAAA,aAAa,EAAE,UAFgB;AAG/B,MAAA,OAAO,EAAE,gBAAgB,CAAC;AAHK,KAAV,CAAvB;AAMA,QAAM,WAAW,GAAG,gBAAgB,CAAC,gBAAjB,CAAkC,KAAI,CAAC,OAAvC,CAApB;AACA,QAAM,MAAM,GAAG,QAAQ,CAAC,WAAD,EAAc;AACnC,MAAA,OAAO,EAAE,KAAI,CAAC,IADqB;AAEnC,MAAA,OAAO,EAAE,KAAI,CAAC,OAAL,CAAa,OAFa;AAGnC,MAAA,OAAO,EAAE,KAAI,CAAC,OAAL,CAAa;AAHa,KAAd,CAAvB;AAKA,IAAA,KAAI,CAAC,KAAL,GAAa,OAAA,CAAA,OAAA,CAAM,MAAN,CAAa,MAAb,CAAb;;AACD;;AAED,EAAA,gBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,KAAP,EAAiC;AAC/B,WAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,OAAL,CAAa,aAA7B,EAA4C,KAA5C,EAAmD,IAAnD,CAAwD,KAAK,OAA7D,CAAP;AACD,GAFD;;AAIA,EAAA,gBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,QAAR,EAAgB;AACd,WAAO,QAAQ,CAAC,IAAhB;AACD,GAFD;;AAIe,EAAA,gBAAA,CAAA,gBAAA,GAAf,UAAgC,OAAhC,EAA2D;AACzD,QAAM,WAAW,GAGb,EAHJ;;AAIA,QAAI,OAAO,CAAC,SAAR,KAAsB,SAA1B,EAAqC;AACnC,UAAM,MAAM,GAAG,OAAO,CAAC,SAAR,CAAkB,KAAlB,CAAwB,GAAxB,CAAf;AACA,UAAM,IAAI,GAAG;AAAE,QAAA,QAAQ,EAAE,MAAM,CAAC,CAAD,CAAlB;AAAuB,QAAA,QAAQ,EAAE,MAAM,CAAC,CAAD;AAAvC,OAAb;AACA,MAAA,WAAW,CAAC,IAAZ,GAAmB,IAAnB;AACD;;AACD,QAAI,OAAO,CAAC,eAAZ,EAA6B;AAC3B,MAAA,WAAW,CAAC,eAAZ,GAA8B,IAA9B;AACD;;AACD,WAAO,WAAP;AACD,GAdc;;AA7BR,EAAA,gBAAA,CAAA,OAAA,GAAU,IAAV;AA4CT,SAAA,gBAAA;AAAC,CA7CD,CAAsC,aAAA,CAAA,WAAtC,CAAA;;AAAa,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar axios_1 = require(\"axios\");\nvar ESTransport_1 = require(\"./ESTransport\");\nvar defaults = require('lodash/defaults');\nvar AxiosESTransport = /** @class */ (function (_super) {\n    __extends(AxiosESTransport, _super);\n    function AxiosESTransport(host, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.host = host;\n        _this.options = defaults(options, {\n            headers: {},\n            searchUrlPath: '/_search',\n            timeout: AxiosESTransport.timeout\n        });\n        var credentials = AxiosESTransport.parseCredentials(_this.options);\n        var config = defaults(credentials, {\n            baseURL: _this.host,\n            timeout: _this.options.timeout,\n            headers: _this.options.headers\n        });\n        _this.axios = axios_1.default.create(config);\n        return _this;\n    }\n    AxiosESTransport.prototype.search = function (query) {\n        return this.axios.post(this.options.searchUrlPath, query).then(this.getData);\n    };\n    AxiosESTransport.prototype.getData = function (response) {\n        return response.data;\n    };\n    AxiosESTransport.parseCredentials = function (options) {\n        var credentials = {};\n        if (options.basicAuth !== undefined) {\n            var parsed = options.basicAuth.split(':');\n            var auth = { username: parsed[0], password: parsed[1] };\n            credentials.auth = auth;\n        }\n        if (options.withCredentials) {\n            credentials.withCredentials = true;\n        }\n        return credentials;\n    };\n    AxiosESTransport.timeout = 5000;\n    return AxiosESTransport;\n}(ESTransport_1.ESTransport));\nexports.AxiosESTransport = AxiosESTransport;\n//# sourceMappingURL=AxiosESTransport.js.map"]},"metadata":{},"sourceType":"script"}
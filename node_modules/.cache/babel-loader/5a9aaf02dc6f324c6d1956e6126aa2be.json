{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../core\");\n\nvar ui_1 = require(\"../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar get = require('lodash/get');\n\nvar identity = require('lodash/identity');\n\nvar DynamicRangeFilter =\n/** @class */\nfunction (_super) {\n  __extends(DynamicRangeFilter, _super);\n\n  function DynamicRangeFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n    _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n    return _this;\n  }\n\n  DynamicRangeFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        field = _a.field,\n        fieldOptions = _a.fieldOptions,\n        rangeFormatter = _a.rangeFormatter,\n        translations = _a.translations;\n    return new core_1.DynamicRangeAccessor(id, {\n      id: id,\n      title: title,\n      field: field,\n      fieldOptions: fieldOptions,\n      rangeFormatter: rangeFormatter,\n      translations: translations\n    });\n  };\n\n  DynamicRangeFilter.prototype.defineBEMBlocks = function () {\n    var block = this.props.mod || 'sk-dynamic-range-filter';\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    };\n  };\n\n  DynamicRangeFilter.prototype.getMinMax = function () {\n    return {\n      min: this.accessor.getStat('min') || 0,\n      max: this.accessor.getStat('max') || 0\n    };\n  };\n\n  DynamicRangeFilter.prototype.sliderUpdate = function (newValues) {\n    var _a = this.getMinMax(),\n        min = _a.min,\n        max = _a.max;\n\n    if (newValues.min == min && newValues.max == max) {\n      this.accessor.state = this.accessor.state.clear();\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues);\n    }\n\n    this.forceUpdate();\n  };\n\n  DynamicRangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n    this.sliderUpdate(newValues);\n    this.searchkit.performSearch();\n  };\n\n  DynamicRangeFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.isDisabled()\n    }, this.renderRangeComponent(this.props.rangeComponent));\n  };\n\n  DynamicRangeFilter.prototype.renderRangeComponent = function (component) {\n    var _a = this.getMinMax(),\n        min = _a.min,\n        max = _a.max;\n\n    var rangeFormatter = this.props.rangeFormatter;\n    var state = this.accessor.state.getValue();\n    return core_1.renderComponent(component, {\n      min: min,\n      max: max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      rangeFormatter: rangeFormatter,\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch\n    });\n  };\n\n  DynamicRangeFilter.propTypes = defaults({\n    field: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    containerComponent: core_1.RenderComponentPropType,\n    rangeComponent: core_1.RenderComponentPropType,\n    rangeFormatter: PropTypes.func,\n    fieldOptions: PropTypes.shape({\n      type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n      options: PropTypes.object\n    })\n  }, core_1.SearchkitComponent.propTypes);\n  DynamicRangeFilter.defaultProps = {\n    containerComponent: ui_1.Panel,\n    rangeComponent: ui_1.RangeSlider,\n    rangeFormatter: identity\n  };\n  return DynamicRangeFilter;\n}(core_1.SearchkitComponent);\n\nexports.DynamicRangeFilter = DynamicRangeFilter;","map":{"version":3,"sources":["../../../../../src/components/search/filters/dynamic-range-filter/DynamicRangeFilter.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AAUA,IAAA,IAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAEA,IAAM,QAAQ,GAAG,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAM,GAAG,GAAG,OAAO,CAAC,YAAD,CAAnB;;AACA,IAAM,QAAQ,GAAG,OAAO,CAAC,iBAAD,CAAxB;;AAYA,IAAA,kBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAwC,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AAyBtC,WAAA,kBAAA,CAAY,KAAZ,EAAiB;AAAjB,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADd;;AAEE,IAAA,KAAI,CAAC,YAAL,GAAoB,KAAI,CAAC,YAAL,CAAkB,IAAlB,CAAuB,KAAvB,CAApB;AACA,IAAA,KAAI,CAAC,qBAAL,GAA6B,KAAI,CAAC,qBAAL,CAA2B,IAA3B,CAAgC,KAAhC,CAA7B;;AACD;;AAED,EAAA,kBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACQ,QAAA,EAAA,GAAA,KAAA,KAAA;AAAA,QAAE,EAAA,GAAA,EAAA,CAAA,EAAF;AAAA,QAAM,KAAA,GAAA,EAAA,CAAA,KAAN;AAAA,QAAa,KAAA,GAAA,EAAA,CAAA,KAAb;AAAA,QAAoB,YAAA,GAAA,EAAA,CAAA,YAApB;AAAA,QAAkC,cAAA,GAAA,EAAA,CAAA,cAAlC;AAAA,QAAkD,YAAA,GAAA,EAAA,CAAA,YAAlD;AACN,WAAO,IAAI,MAAA,CAAA,oBAAJ,CAAyB,EAAzB,EAA6B;AAClC,MAAA,EAAE,EAAA,EADgC;AAElC,MAAA,KAAK,EAAA,KAF6B;AAGlC,MAAA,KAAK,EAAA,KAH6B;AAIlC,MAAA,YAAY,EAAA,YAJsB;AAKlC,MAAA,cAAc,EAAA,cALoB;AAMlC,MAAA,YAAY,EAAA;AANsB,KAA7B,CAAP;AAQD,GAVD;;AAYA,EAAA,kBAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACE,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,GAAX,IAAkB,yBAAhC;AACA,WAAO;AACL,MAAA,SAAS,EAAE,KADN;AAEL,MAAA,MAAM,EAAE,KAAK,GAAG;AAFX,KAAP;AAID,GAND;;AAQA,EAAA,kBAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;AACE,WAAO;AACL,MAAA,GAAG,EAAE,KAAK,QAAL,CAAc,OAAd,CAAsB,KAAtB,KAAgC,CADhC;AAEL,MAAA,GAAG,EAAE,KAAK,QAAL,CAAc,OAAd,CAAsB,KAAtB,KAAgC;AAFhC,KAAP;AAID,GALD;;AAOA,EAAA,kBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,SAAb,EAAsB;AACd,QAAA,EAAA,GAAA,KAAA,SAAA,EAAA;AAAA,QAAE,GAAA,GAAA,EAAA,CAAA,GAAF;AAAA,QAAO,GAAA,GAAA,EAAA,CAAA,GAAP;;AAEN,QAAI,SAAS,CAAC,GAAV,IAAiB,GAAjB,IAAwB,SAAS,CAAC,GAAV,IAAiB,GAA7C,EAAkD;AAChD,WAAK,QAAL,CAAc,KAAd,GAAsB,KAAK,QAAL,CAAc,KAAd,CAAoB,KAApB,EAAtB;AACD,KAFD,MAEO;AACL,WAAK,QAAL,CAAc,KAAd,GAAsB,KAAK,QAAL,CAAc,KAAd,CAAoB,QAApB,CAA6B,SAA7B,CAAtB;AACD;;AAED,SAAK,WAAL;AACD,GAVD;;AAYA,EAAA,kBAAA,CAAA,SAAA,CAAA,qBAAA,GAAA,UAAsB,SAAtB,EAA+B;AAC7B,SAAK,YAAL,CAAkB,SAAlB;AACA,SAAK,SAAL,CAAe,aAAf;AACD,GAHD;;AAKA,EAAA,kBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE,QAAI,CAAC,KAAK,QAAV,EAAoB,OAAO,IAAP;AACd,QAAA,EAAA,GAAA,KAAA,KAAA;AAAA,QAAE,EAAA,GAAA,EAAA,CAAA,EAAF;AAAA,QAAM,KAAA,GAAA,EAAA,CAAA,KAAN;AAAA,QAAa,kBAAA,GAAA,EAAA,CAAA,kBAAb;AAEN,WAAO,MAAA,CAAA,eAAA,CACL,kBADK,EAEL;AACE,MAAA,KAAK,EAAA,KADP;AAEE,MAAA,SAAS,EAAE,EAAE,GAAG,aAAW,EAAd,GAAqB,SAFpC;AAGE,MAAA,QAAQ,EAAE,KAAK,QAAL,CAAc,UAAd;AAHZ,KAFK,EAOL,KAAK,oBAAL,CAA0B,KAAK,KAAL,CAAW,cAArC,CAPK,CAAP;AASD,GAbD;;AAeA,EAAA,kBAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,UAAqB,SAArB,EAAwD;AAChD,QAAA,EAAA,GAAA,KAAA,SAAA,EAAA;AAAA,QAAE,GAAA,GAAA,EAAA,CAAA,GAAF;AAAA,QAAO,GAAA,GAAA,EAAA,CAAA,GAAP;;AACE,QAAA,cAAA,GAAA,KAAA,KAAA,CAAA,cAAA;AACR,QAAM,KAAK,GAAG,KAAK,QAAL,CAAc,KAAd,CAAoB,QAApB,EAAd;AACA,WAAO,MAAA,CAAA,eAAA,CAAgB,SAAhB,EAA2B;AAChC,MAAA,GAAG,EAAA,GAD6B;AAEhC,MAAA,GAAG,EAAA,GAF6B;AAGhC,MAAA,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,GAAf,CAAJ,CAHgB;AAIhC,MAAA,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,GAAf,CAAJ,CAJgB;AAKhC,MAAA,cAAc,EAAA,cALkB;AAMhC,MAAA,QAAQ,EAAE,KAAK,YANiB;AAOhC,MAAA,UAAU,EAAE,KAAK;AAPe,KAA3B,CAAP;AASD,GAbD;;AAvFO,EAAA,kBAAA,CAAA,SAAA,GAAY,QAAQ,CACzB;AACE,IAAA,KAAK,EAAE,SAAS,CAAC,MAAV,CAAiB,UAD1B;AAEE,IAAA,KAAK,EAAE,SAAS,CAAC,MAAV,CAAiB,UAF1B;AAGE,IAAA,EAAE,EAAE,SAAS,CAAC,MAAV,CAAiB,UAHvB;AAIE,IAAA,kBAAkB,EAAE,MAAA,CAAA,uBAJtB;AAKE,IAAA,cAAc,EAAE,MAAA,CAAA,uBALlB;AAME,IAAA,cAAc,EAAE,SAAS,CAAC,IAN5B;AAOE,IAAA,YAAY,EAAE,SAAS,CAAC,KAAV,CAAgB;AAC5B,MAAA,IAAI,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,UAAD,EAAa,QAAb,EAAuB,UAAvB,CAAhB,EAAoD,UAD9B;AAE5B,MAAA,OAAO,EAAE,SAAS,CAAC;AAFS,KAAhB;AAPhB,GADyB,EAazB,MAAA,CAAA,kBAAA,CAAmB,SAbM,CAApB;AAgBA,EAAA,kBAAA,CAAA,YAAA,GAAe;AACpB,IAAA,kBAAkB,EAAE,IAAA,CAAA,KADA;AAEpB,IAAA,cAAc,EAAE,IAAA,CAAA,WAFI;AAGpB,IAAA,cAAc,EAAE;AAHI,GAAf;AAqFT,SAAA,kBAAA;AAAC,CAxGD,CAAwC,MAAA,CAAA,kBAAxC,CAAA;;AAAa,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PropTypes = require(\"prop-types\");\nvar core_1 = require(\"../../../../core\");\nvar ui_1 = require(\"../../../ui\");\nvar defaults = require('lodash/defaults');\nvar get = require('lodash/get');\nvar identity = require('lodash/identity');\nvar DynamicRangeFilter = /** @class */ (function (_super) {\n    __extends(DynamicRangeFilter, _super);\n    function DynamicRangeFilter(props) {\n        var _this = _super.call(this, props) || this;\n        _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n        _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n        return _this;\n    }\n    DynamicRangeFilter.prototype.defineAccessor = function () {\n        var _a = this.props, id = _a.id, title = _a.title, field = _a.field, fieldOptions = _a.fieldOptions, rangeFormatter = _a.rangeFormatter, translations = _a.translations;\n        return new core_1.DynamicRangeAccessor(id, {\n            id: id,\n            title: title,\n            field: field,\n            fieldOptions: fieldOptions,\n            rangeFormatter: rangeFormatter,\n            translations: translations\n        });\n    };\n    DynamicRangeFilter.prototype.defineBEMBlocks = function () {\n        var block = this.props.mod || 'sk-dynamic-range-filter';\n        return {\n            container: block,\n            labels: block + '-value-labels'\n        };\n    };\n    DynamicRangeFilter.prototype.getMinMax = function () {\n        return {\n            min: this.accessor.getStat('min') || 0,\n            max: this.accessor.getStat('max') || 0\n        };\n    };\n    DynamicRangeFilter.prototype.sliderUpdate = function (newValues) {\n        var _a = this.getMinMax(), min = _a.min, max = _a.max;\n        if (newValues.min == min && newValues.max == max) {\n            this.accessor.state = this.accessor.state.clear();\n        }\n        else {\n            this.accessor.state = this.accessor.state.setValue(newValues);\n        }\n        this.forceUpdate();\n    };\n    DynamicRangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n        this.sliderUpdate(newValues);\n        this.searchkit.performSearch();\n    };\n    DynamicRangeFilter.prototype.render = function () {\n        if (!this.accessor)\n            return null;\n        var _a = this.props, id = _a.id, title = _a.title, containerComponent = _a.containerComponent;\n        return core_1.renderComponent(containerComponent, {\n            title: title,\n            className: id ? \"filter--\" + id : undefined,\n            disabled: this.accessor.isDisabled()\n        }, this.renderRangeComponent(this.props.rangeComponent));\n    };\n    DynamicRangeFilter.prototype.renderRangeComponent = function (component) {\n        var _a = this.getMinMax(), min = _a.min, max = _a.max;\n        var rangeFormatter = this.props.rangeFormatter;\n        var state = this.accessor.state.getValue();\n        return core_1.renderComponent(component, {\n            min: min,\n            max: max,\n            minValue: Number(get(state, 'min', min)),\n            maxValue: Number(get(state, 'max', max)),\n            rangeFormatter: rangeFormatter,\n            onChange: this.sliderUpdate,\n            onFinished: this.sliderUpdateAndSearch\n        });\n    };\n    DynamicRangeFilter.propTypes = defaults({\n        field: PropTypes.string.isRequired,\n        title: PropTypes.string.isRequired,\n        id: PropTypes.string.isRequired,\n        containerComponent: core_1.RenderComponentPropType,\n        rangeComponent: core_1.RenderComponentPropType,\n        rangeFormatter: PropTypes.func,\n        fieldOptions: PropTypes.shape({\n            type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n            options: PropTypes.object\n        })\n    }, core_1.SearchkitComponent.propTypes);\n    DynamicRangeFilter.defaultProps = {\n        containerComponent: ui_1.Panel,\n        rangeComponent: ui_1.RangeSlider,\n        rangeFormatter: identity\n    };\n    return DynamicRangeFilter;\n}(core_1.SearchkitComponent));\nexports.DynamicRangeFilter = DynamicRangeFilter;\n//# sourceMappingURL=DynamicRangeFilter.js.map"]},"metadata":{},"sourceType":"script"}
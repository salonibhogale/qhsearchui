{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Align from 'rc-align';\nimport Animate from 'rc-animate';\nimport PopupInner from './PopupInner';\nimport LazyRenderBox from './LazyRenderBox';\nimport { saveRef } from './utils';\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, (Popup.__proto__ || Object.getPrototypeOf(Popup)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.savePopupRef = saveRef.bind(_this, 'popupInstance');\n    _this.saveAlignRef = saveRef.bind(_this, 'alignInstance');\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.rootNode = this.getPopupDomNode();\n    }\n  }, {\n    key: 'getPopupDomNode',\n    value: function getPopupDomNode() {\n      return ReactDOM.findDOMNode(this.popupInstance);\n    }\n  }, {\n    key: 'getMaskTransitionName',\n    value: function getMaskTransitionName() {\n      var props = this.props;\n      var transitionName = props.maskTransitionName;\n      var animation = props.maskAnimation;\n\n      if (!transitionName && animation) {\n        transitionName = props.prefixCls + '-' + animation;\n      }\n\n      return transitionName;\n    }\n  }, {\n    key: 'getTransitionName',\n    value: function getTransitionName() {\n      var props = this.props;\n      var transitionName = props.transitionName;\n\n      if (!transitionName && props.animation) {\n        transitionName = props.prefixCls + '-' + props.animation;\n      }\n\n      return transitionName;\n    }\n  }, {\n    key: 'getClassName',\n    value: function getClassName(currentAlignClassName) {\n      return this.props.prefixCls + ' ' + this.props.className + ' ' + currentAlignClassName;\n    }\n  }, {\n    key: 'getPopupElement',\n    value: function getPopupElement() {\n      var savePopupRef = this.savePopupRef,\n          props = this.props;\n      var align = props.align,\n          style = props.style,\n          visible = props.visible,\n          prefixCls = props.prefixCls,\n          destroyPopupOnHide = props.destroyPopupOnHide;\n      var className = this.getClassName(this.currentAlignClassName || props.getClassNameFromAlign(align));\n      var hiddenClassName = prefixCls + '-hidden';\n\n      if (!visible) {\n        this.currentAlignClassName = null;\n      }\n\n      var newStyle = _extends({}, style, this.getZIndexStyle());\n\n      var popupInnerProps = {\n        className: className,\n        prefixCls: prefixCls,\n        ref: savePopupRef,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave,\n        style: newStyle\n      };\n\n      if (destroyPopupOnHide) {\n        return React.createElement(Animate, {\n          component: '',\n          exclusive: true,\n          transitionAppear: true,\n          transitionName: this.getTransitionName()\n        }, visible ? React.createElement(Align, {\n          target: this.getTarget,\n          key: 'popup',\n          ref: this.saveAlignRef,\n          monitorWindowResize: true,\n          align: align,\n          onAlign: this.onAlign\n        }, React.createElement(PopupInner, _extends({\n          visible: true\n        }, popupInnerProps), props.children)) : null);\n      }\n\n      return React.createElement(Animate, {\n        component: '',\n        exclusive: true,\n        transitionAppear: true,\n        transitionName: this.getTransitionName(),\n        showProp: 'xVisible'\n      }, React.createElement(Align, {\n        target: this.getTarget,\n        key: 'popup',\n        ref: this.saveAlignRef,\n        monitorWindowResize: true,\n        xVisible: visible,\n        childrenProps: {\n          visible: 'xVisible'\n        },\n        disabled: !visible,\n        align: align,\n        onAlign: this.onAlign\n      }, React.createElement(PopupInner, _extends({\n        hiddenClassName: hiddenClassName\n      }, popupInnerProps), props.children)));\n    }\n  }, {\n    key: 'getZIndexStyle',\n    value: function getZIndexStyle() {\n      var style = {};\n      var props = this.props;\n\n      if (props.zIndex !== undefined) {\n        style.zIndex = props.zIndex;\n      }\n\n      return style;\n    }\n  }, {\n    key: 'getMaskElement',\n    value: function getMaskElement() {\n      var props = this.props;\n      var maskElement = void 0;\n\n      if (props.mask) {\n        var maskTransition = this.getMaskTransitionName();\n        maskElement = React.createElement(LazyRenderBox, {\n          style: this.getZIndexStyle(),\n          key: 'mask',\n          className: props.prefixCls + '-mask',\n          hiddenClassName: props.prefixCls + '-mask-hidden',\n          visible: props.visible\n        });\n\n        if (maskTransition) {\n          maskElement = React.createElement(Animate, {\n            key: 'mask',\n            showProp: 'visible',\n            transitionAppear: true,\n            component: '',\n            transitionName: maskTransition\n          }, maskElement);\n        }\n      }\n\n      return maskElement;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement('div', null, this.getMaskElement(), this.getPopupElement());\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nPopup.propTypes = {\n  visible: PropTypes.bool,\n  style: PropTypes.object,\n  getClassNameFromAlign: PropTypes.func,\n  onAlign: PropTypes.func,\n  getRootDomNode: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  align: PropTypes.any,\n  destroyPopupOnHide: PropTypes.bool,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseLeave: PropTypes.func\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onAlign = function (popupDomNode, align) {\n    var props = _this2.props;\n    var currentAlignClassName = props.getClassNameFromAlign(align); // FIX: https://github.com/react-component/trigger/issues/56\n    // FIX: https://github.com/react-component/tooltip/issues/79\n\n    if (_this2.currentAlignClassName !== currentAlignClassName) {\n      _this2.currentAlignClassName = currentAlignClassName;\n      popupDomNode.className = _this2.getClassName(currentAlignClassName);\n    }\n\n    props.onAlign(popupDomNode, align);\n  };\n\n  this.getTarget = function () {\n    return _this2.props.getRootDomNode();\n  };\n};\n\nexport default Popup;","map":{"version":3,"sources":["/Users/salonibhogale/qhsearchui/node_modules/searchkit-datefilter/node_modules/rc-trigger/es/Popup.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","Component","PropTypes","ReactDOM","Align","Animate","PopupInner","LazyRenderBox","saveRef","Popup","_Component","props","_this","__proto__","Object","getPrototypeOf","call","_initialiseProps","savePopupRef","bind","saveAlignRef","key","value","componentDidMount","rootNode","getPopupDomNode","findDOMNode","popupInstance","getMaskTransitionName","transitionName","maskTransitionName","animation","maskAnimation","prefixCls","getTransitionName","getClassName","currentAlignClassName","className","getPopupElement","align","style","visible","destroyPopupOnHide","getClassNameFromAlign","hiddenClassName","newStyle","getZIndexStyle","popupInnerProps","ref","onMouseEnter","onMouseLeave","createElement","component","exclusive","transitionAppear","target","getTarget","monitorWindowResize","onAlign","children","showProp","xVisible","childrenProps","disabled","zIndex","undefined","getMaskElement","maskElement","mask","maskTransition","render","propTypes","bool","object","func","getRootDomNode","any","string","_this2","popupDomNode"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Align from 'rc-align';\nimport Animate from 'rc-animate';\nimport PopupInner from './PopupInner';\nimport LazyRenderBox from './LazyRenderBox';\nimport { saveRef } from './utils';\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup(props) {\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, (Popup.__proto__ || Object.getPrototypeOf(Popup)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.savePopupRef = saveRef.bind(_this, 'popupInstance');\n    _this.saveAlignRef = saveRef.bind(_this, 'alignInstance');\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.rootNode = this.getPopupDomNode();\n    }\n  }, {\n    key: 'getPopupDomNode',\n    value: function getPopupDomNode() {\n      return ReactDOM.findDOMNode(this.popupInstance);\n    }\n  }, {\n    key: 'getMaskTransitionName',\n    value: function getMaskTransitionName() {\n      var props = this.props;\n      var transitionName = props.maskTransitionName;\n      var animation = props.maskAnimation;\n      if (!transitionName && animation) {\n        transitionName = props.prefixCls + '-' + animation;\n      }\n      return transitionName;\n    }\n  }, {\n    key: 'getTransitionName',\n    value: function getTransitionName() {\n      var props = this.props;\n      var transitionName = props.transitionName;\n      if (!transitionName && props.animation) {\n        transitionName = props.prefixCls + '-' + props.animation;\n      }\n      return transitionName;\n    }\n  }, {\n    key: 'getClassName',\n    value: function getClassName(currentAlignClassName) {\n      return this.props.prefixCls + ' ' + this.props.className + ' ' + currentAlignClassName;\n    }\n  }, {\n    key: 'getPopupElement',\n    value: function getPopupElement() {\n      var savePopupRef = this.savePopupRef,\n          props = this.props;\n      var align = props.align,\n          style = props.style,\n          visible = props.visible,\n          prefixCls = props.prefixCls,\n          destroyPopupOnHide = props.destroyPopupOnHide;\n\n      var className = this.getClassName(this.currentAlignClassName || props.getClassNameFromAlign(align));\n      var hiddenClassName = prefixCls + '-hidden';\n      if (!visible) {\n        this.currentAlignClassName = null;\n      }\n      var newStyle = _extends({}, style, this.getZIndexStyle());\n      var popupInnerProps = {\n        className: className,\n        prefixCls: prefixCls,\n        ref: savePopupRef,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave,\n        style: newStyle\n      };\n      if (destroyPopupOnHide) {\n        return React.createElement(\n          Animate,\n          {\n            component: '',\n            exclusive: true,\n            transitionAppear: true,\n            transitionName: this.getTransitionName()\n          },\n          visible ? React.createElement(\n            Align,\n            {\n              target: this.getTarget,\n              key: 'popup',\n              ref: this.saveAlignRef,\n              monitorWindowResize: true,\n              align: align,\n              onAlign: this.onAlign\n            },\n            React.createElement(\n              PopupInner,\n              _extends({\n                visible: true\n              }, popupInnerProps),\n              props.children\n            )\n          ) : null\n        );\n      }\n      return React.createElement(\n        Animate,\n        {\n          component: '',\n          exclusive: true,\n          transitionAppear: true,\n          transitionName: this.getTransitionName(),\n          showProp: 'xVisible'\n        },\n        React.createElement(\n          Align,\n          {\n            target: this.getTarget,\n            key: 'popup',\n            ref: this.saveAlignRef,\n            monitorWindowResize: true,\n            xVisible: visible,\n            childrenProps: { visible: 'xVisible' },\n            disabled: !visible,\n            align: align,\n            onAlign: this.onAlign\n          },\n          React.createElement(\n            PopupInner,\n            _extends({\n              hiddenClassName: hiddenClassName\n            }, popupInnerProps),\n            props.children\n          )\n        )\n      );\n    }\n  }, {\n    key: 'getZIndexStyle',\n    value: function getZIndexStyle() {\n      var style = {};\n      var props = this.props;\n      if (props.zIndex !== undefined) {\n        style.zIndex = props.zIndex;\n      }\n      return style;\n    }\n  }, {\n    key: 'getMaskElement',\n    value: function getMaskElement() {\n      var props = this.props;\n      var maskElement = void 0;\n      if (props.mask) {\n        var maskTransition = this.getMaskTransitionName();\n        maskElement = React.createElement(LazyRenderBox, {\n          style: this.getZIndexStyle(),\n          key: 'mask',\n          className: props.prefixCls + '-mask',\n          hiddenClassName: props.prefixCls + '-mask-hidden',\n          visible: props.visible\n        });\n        if (maskTransition) {\n          maskElement = React.createElement(\n            Animate,\n            {\n              key: 'mask',\n              showProp: 'visible',\n              transitionAppear: true,\n              component: '',\n              transitionName: maskTransition\n            },\n            maskElement\n          );\n        }\n      }\n      return maskElement;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement(\n        'div',\n        null,\n        this.getMaskElement(),\n        this.getPopupElement()\n      );\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nPopup.propTypes = {\n  visible: PropTypes.bool,\n  style: PropTypes.object,\n  getClassNameFromAlign: PropTypes.func,\n  onAlign: PropTypes.func,\n  getRootDomNode: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  align: PropTypes.any,\n  destroyPopupOnHide: PropTypes.bool,\n  className: PropTypes.string,\n  prefixCls: PropTypes.string,\n  onMouseLeave: PropTypes.func\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onAlign = function (popupDomNode, align) {\n    var props = _this2.props;\n    var currentAlignClassName = props.getClassNameFromAlign(align);\n    // FIX: https://github.com/react-component/trigger/issues/56\n    // FIX: https://github.com/react-component/tooltip/issues/79\n    if (_this2.currentAlignClassName !== currentAlignClassName) {\n      _this2.currentAlignClassName = currentAlignClassName;\n      popupDomNode.className = _this2.getClassName(currentAlignClassName);\n    }\n    props.onAlign(popupDomNode, align);\n  };\n\n  this.getTarget = function () {\n    return _this2.props.getRootDomNode();\n  };\n};\n\nexport default Popup;"]},"metadata":{},"sourceType":"module"}
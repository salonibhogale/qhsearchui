{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar state_1 = require(\"../state\");\n\nvar support_1 = require(\"../support\");\n\nvar StatefulAccessor_1 = require(\"./StatefulAccessor\");\n\nvar find = require('lodash/find');\n\nvar head = require('lodash/head');\n\nvar map = require('lodash/map');\n\nvar SortingAccessor =\n/** @class */\nfunction (_super) {\n  __extends(SortingAccessor, _super);\n\n  function SortingAccessor(key, options) {\n    var _this = _super.call(this, key) || this;\n\n    _this.state = new state_1.ValueState();\n    _this.options = options;\n    _this.options.options = support_1.Utils.computeOptionKeys(_this.options.options, ['field', 'order'], 'none');\n    return _this;\n  }\n\n  SortingAccessor.prototype.getSelectedOption = function () {\n    var options = this.options.options;\n    return find(options, {\n      key: \"\" + this.state.getValue()\n    }) || find(options, {\n      defaultOption: true\n    }) || head(options);\n  };\n\n  SortingAccessor.prototype.getSortQuery = function (sortOption) {\n    var _a;\n\n    if (sortOption.fields) {\n      return map(sortOption.fields, function (field) {\n        var _a;\n\n        return _a = {}, _a[field.field] = field.options || {}, _a;\n      });\n    } else if (sortOption.field && sortOption.order) {\n      return [(_a = {}, _a[sortOption.field] = sortOption.order, _a)];\n    } else if (sortOption.field) {\n      return [sortOption.field];\n    }\n\n    return null;\n  };\n\n  SortingAccessor.prototype.buildOwnQuery = function (query) {\n    var selectedSortOption = this.getSelectedOption();\n\n    if (selectedSortOption) {\n      var sortQuery = this.getSortQuery(selectedSortOption);\n\n      if (sortQuery) {\n        query = query.setSort(sortQuery);\n      }\n    }\n\n    return query;\n  };\n\n  return SortingAccessor;\n}(StatefulAccessor_1.StatefulAccessor);\n\nexports.SortingAccessor = SortingAccessor;","map":{"version":3,"sources":["../../../src/core/accessors/SortingAccessor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AACA,IAAM,IAAI,GAAG,OAAO,CAAC,aAAD,CAApB;;AACA,IAAM,IAAI,GAAG,OAAO,CAAC,aAAD,CAApB;;AACA,IAAM,GAAG,GAAG,OAAO,CAAC,YAAD,CAAnB;;AAoBA,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAqC,EAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;;AAInC,WAAA,eAAA,CAAY,GAAZ,EAAiB,OAAjB,EAAwC;AAAxC,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,GAAN,KAAU,IADZ;;AAHA,IAAA,KAAA,CAAA,KAAA,GAAQ,IAAI,OAAA,CAAA,UAAJ,EAAR;AAKE,IAAA,KAAI,CAAC,OAAL,GAAe,OAAf;AACA,IAAA,KAAI,CAAC,OAAL,CAAa,OAAb,GAAuB,SAAA,CAAA,KAAA,CAAM,iBAAN,CAAwB,KAAI,CAAC,OAAL,CAAa,OAArC,EAA8C,CAAC,OAAD,EAAU,OAAV,CAA9C,EAAkE,MAAlE,CAAvB;;AACD;;AAED,EAAA,eAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACE,QAAM,OAAO,GAAG,KAAK,OAAL,CAAa,OAA7B;AACA,WACE,IAAI,CAAC,OAAD,EAAU;AAAE,MAAA,GAAG,EAAE,KAAG,KAAK,KAAL,CAAW,QAAX;AAAV,KAAV,CAAJ,IACA,IAAI,CAAC,OAAD,EAAU;AAAE,MAAA,aAAa,EAAE;AAAjB,KAAV,CADJ,IAEA,IAAI,CAAC,OAAD,CAHN;AAKD,GAPD;;AASA,EAAA,eAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,UAAb,EAAuB;;;AACrB,QAAI,UAAU,CAAC,MAAf,EAAuB;AACrB,aAAO,GAAG,CAAC,UAAU,CAAC,MAAZ,EAAoB,UAAC,KAAD,EAAoB;;;AAAK,eAAA,EAAA,GAAA,EAAA,EACrD,EAAA,CAAC,KAAK,CAAC,KAAP,CAAA,GAAe,KAAK,CAAC,OAAN,IAAiB,EADqB,EAErD,EAFqD;AAErD,OAFQ,CAAV;AAGD,KAJD,MAIO,IAAI,UAAU,CAAC,KAAX,IAAoB,UAAU,CAAC,KAAnC,EAA0C;AAC/C,aAAO,EAAA,EAAA,GAAA,EAAA,EAAG,EAAA,CAAC,UAAU,CAAC,KAAZ,CAAA,GAAoB,UAAU,CAAC,KAAlC,EAAuC,EAAvC,EAAP;AACD,KAFM,MAEA,IAAI,UAAU,CAAC,KAAf,EAAsB;AAC3B,aAAO,CAAC,UAAU,CAAC,KAAZ,CAAP;AACD;;AACD,WAAO,IAAP;AACD,GAXD;;AAaA,EAAA,eAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,KAAd,EAAmB;AACjB,QAAM,kBAAkB,GAAG,KAAK,iBAAL,EAA3B;;AACA,QAAI,kBAAJ,EAAwB;AACtB,UAAM,SAAS,GAAG,KAAK,YAAL,CAAkB,kBAAlB,CAAlB;;AACA,UAAI,SAAJ,EAAe;AACb,QAAA,KAAK,GAAG,KAAK,CAAC,OAAN,CAAc,SAAd,CAAR;AACD;AACF;;AACD,WAAO,KAAP;AACD,GATD;;AAUF,SAAA,eAAA;AAAC,CA1CD,CAAqC,kBAAA,CAAA,gBAArC,CAAA;;AAAa,OAAA,CAAA,eAAA,GAAA,eAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar state_1 = require(\"../state\");\nvar support_1 = require(\"../support\");\nvar StatefulAccessor_1 = require(\"./StatefulAccessor\");\nvar find = require('lodash/find');\nvar head = require('lodash/head');\nvar map = require('lodash/map');\nvar SortingAccessor = /** @class */ (function (_super) {\n    __extends(SortingAccessor, _super);\n    function SortingAccessor(key, options) {\n        var _this = _super.call(this, key) || this;\n        _this.state = new state_1.ValueState();\n        _this.options = options;\n        _this.options.options = support_1.Utils.computeOptionKeys(_this.options.options, ['field', 'order'], 'none');\n        return _this;\n    }\n    SortingAccessor.prototype.getSelectedOption = function () {\n        var options = this.options.options;\n        return (find(options, { key: \"\" + this.state.getValue() }) ||\n            find(options, { defaultOption: true }) ||\n            head(options));\n    };\n    SortingAccessor.prototype.getSortQuery = function (sortOption) {\n        var _a;\n        if (sortOption.fields) {\n            return map(sortOption.fields, function (field) {\n                var _a;\n                return (_a = {},\n                    _a[field.field] = field.options || {},\n                    _a);\n            });\n        }\n        else if (sortOption.field && sortOption.order) {\n            return [(_a = {}, _a[sortOption.field] = sortOption.order, _a)];\n        }\n        else if (sortOption.field) {\n            return [sortOption.field];\n        }\n        return null;\n    };\n    SortingAccessor.prototype.buildOwnQuery = function (query) {\n        var selectedSortOption = this.getSelectedOption();\n        if (selectedSortOption) {\n            var sortQuery = this.getSortQuery(selectedSortOption);\n            if (sortQuery) {\n                query = query.setSort(sortQuery);\n            }\n        }\n        return query;\n    };\n    return SortingAccessor;\n}(StatefulAccessor_1.StatefulAccessor));\nexports.SortingAccessor = SortingAccessor;\n//# sourceMappingURL=SortingAccessor.js.map"]},"metadata":{},"sourceType":"script"}